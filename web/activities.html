<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧驿站·心语同行 - 党建空间</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- 自定义样式 -->
    <style>
        :root {
            --primary-color: #0d6efd;
            --primary-dark: #0b5ed7;
            --success-color: #198754;
            --info-color: #0dcaf0;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }
        
        .bg-gradient-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        }
        
        .feature-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hover-lift {
            transition: transform 0.3s ease;
        }

        .hover-lift:hover {
            transform: translateY(-5px);
        }

        /* 文章模态框样式 */
        .article-modal {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(220, 53, 69, 0.15);
        }

        .article-modal .modal-header {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            border: none;
            padding: 1.5rem 2rem;
        }

        .article-modal .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .article-content {
            padding: 2rem;
            line-height: 1.8;
            color: #333;
        }

        .article-content h4 {
            color: #dc3545;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f8d7da;
        }

        .article-content h4:first-child {
            margin-top: 0;
        }

        .article-content p {
            margin-bottom: 1rem;
            text-align: justify;
            font-size: 1rem;
        }

        .info-box {
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaea 100%);
            border: 1px solid #f5c6cb;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .info-box h6 {
            color: #dc3545;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .key-points, .locations {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .key-points li, .locations li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f8d7da;
            position: relative;
            padding-left: 1.5rem;
        }

        .key-points li:before {
            content: "●";
            color: #dc3545;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .locations li:before {
            content: "📍";
            position: absolute;
            left: 0;
        }

        .key-points li:last-child, .locations li:last-child {
            border-bottom: none;
        }

        .significance-box {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 1.5rem;
            border-left: 4px solid #28a745;
        }

        .significance-box h6 {
            color: #155724;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .significance-box p {
            color: #155724;
            font-weight: 500;
            margin: 0;
        }

        .article-modal .modal-footer {
            background: #f8f9fa;
            border: none;
            padding: 1.5rem 2rem;
        }

        .article-modal .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            border: none;
            border-radius: 25px;
            padding: 0.5rem 1.5rem;
            font-weight: 500;
        }

        .article-modal .btn-outline-danger {
            border: 2px solid #dc3545;
            color: #dc3545;
            border-radius: 25px;
            padding: 0.5rem 1.5rem;
            font-weight: 500;
        }

        .article-modal .btn-outline-danger:hover {
            background: #dc3545;
            border-color: #dc3545;
        }

        /* 参观信息框样式 */
        .visit-info-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 1px solid #90caf9;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .visit-info-box h6 {
            color: #1976d2;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .visit-info-box p {
            color: #1565c0;
            margin: 0;
        }

        .stat-item h3 {
            margin-bottom: 0.5rem;
        }

        .stat-item p {
            margin-bottom: 0;
            font-size: 1.1rem;
        }
        
        /* 兼容性CSS */
        .d-flex {
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
        }
        
        .flex-wrap {
            -webkit-flex-wrap: wrap;
            -moz-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
        }
        
        .gap-3 {
            gap: 1rem;
        }
        
        /* 兼容性备用方案 */
        .gap-3 > * {
            margin-right: 1rem;
            margin-bottom: 1rem;
        }

        .gap-3 > *:last-child {
            margin-right: 0;
        }

        .justify-content-center {
            -webkit-box-pack: center;
            -webkit-justify-content: center;
            -moz-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
        }

        .align-items-center {
            -webkit-box-align: center;
            -webkit-align-items: center;
            -moz-box-align: center;
            -ms-flex-align: center;
            align-items: center;
        }
        
        /* 导航栏优化样式 */
        .navbar-brand:hover {
            text-decoration: none !important;
        }
        
        .nav-link:hover {
            color: #0d6efd !important;
            text-decoration: none !important;
        }
        
        /* 移动端优化 */
        @media (max-width: 768px) {
            .navbar-brand span {
                font-size: 1.5rem !important;
            }
            
            .d-flex.flex-wrap {
                gap: 0.5rem !important;
            }
            
            .nav-link {
                font-size: 0.9rem;
                padding: 0.25rem 0.5rem !important;
            }
            
            .btn {
                font-size: 0.9rem;
                padding: 0.375rem 0.75rem !important;
            }
        }
        
        @media (max-width: 576px) {
            .navbar-brand span {
                font-size: 1.25rem !important;
            }
            
            .nav-link {
                font-size: 0.85rem;
            }
            
            .btn {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <!-- 第一行：网站标题 -->
            <div class="w-100 d-flex justify-content-center mb-2">
                <a class="navbar-brand d-flex align-items-center text-decoration-none" href="index.html">
                    <img src="images/2.png" alt="网站Logo" style="height: 60px; width: auto; margin-right: 15px; border-radius: 10px;">
                    <span class="fw-bold text-danger fs-3">智慧驿站·心语同行</span>
                </a>
            </div>

            <!-- 第二行：导航链接 -->
            <div class="w-100 d-flex justify-content-center">
                <div class="d-flex flex-wrap justify-content-center align-items-center gap-2 gap-md-3">
                    <!-- 主要导航链接 -->
                    <a class="nav-link text-dark px-2 py-2 text-decoration-none" href="index.html">首页</a>
                    <a class="nav-link text-dark px-2 py-2 text-decoration-none" href="about.html">关于我们</a>
                    <a class="nav-link text-dark px-2 py-2 text-decoration-none" href="assessment.html">心理测评</a>
                    <a class="btn btn-primary px-3 py-2" href="activities.html">党建空间</a>
                    <a class="nav-link text-dark px-2 py-2 text-decoration-none" href="community.html">互动社区</a>
                    <a class="nav-link text-dark px-2 py-2 text-decoration-none" href="consultation.html">在线咨询</a>

                    <!-- 用户操作按钮 -->
                    <div class="d-flex gap-1 user-actions">
                        <a href="login.html" class="nav-link text-dark px-2 py-2 text-decoration-none">登录</a>
                        <a href="register.html" class="nav-link text-dark px-2 py-2 text-decoration-none">注册</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="text-white py-5" style="background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);"
        <div class="container">
            <div class="row align-items-center" style="min-height: 60vh;">
                <div class="col-lg-1"></div>
                <div class="col-lg-4 col-md-6">
                    <h1 class="display-4 fw-bold mb-4">
                        党建空间
                    </h1>
                    <p class="lead mb-4">
                        以党建引领心理健康服务，传承红色精神，凝聚青春力量。
                        我们将党的理论学习与心理健康教育相结合，为广大师生提供思想引领。
                    </p>
                    <div class="d-flex gap-3 flex-wrap">
                        <a href="#party-activities" class="btn btn-light btn-lg">
                            <i class="fas fa-flag me-2"></i>党建活动
                        </a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 text-center">
                    <div class="bg-white bg-opacity-10 rounded-3 p-4 d-inline-block" style="width: 66.67%;">
                        <img src="images/1.jpg" alt="党建引领" style="width: 100%; max-width: 280px; height: auto; border-radius: 15px; margin-bottom: 15px;">
                        <h4>党建引领</h4>
                    </div>
                </div>
                <div class="col-lg-3"></div>
            </div>
        </div>
    </section>

    <!-- 导航标签 -->
    <section class="py-3 bg-light">
        <div class="container">
            <ul class="nav nav-pills justify-content-center" id="partyTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="history-tab" data-bs-toggle="pill" data-bs-target="#history" type="button" role="tab">
                        <i class="fas fa-flag me-2"></i>党史学习
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="theory-tab" data-bs-toggle="pill" data-bs-target="#theory" type="button" role="tab">
                        <i class="fas fa-book me-2"></i>理论研讨
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="volunteer-tab" data-bs-toggle="pill" data-bs-target="#volunteer" type="button" role="tab">
                        <i class="fas fa-hands-helping me-2"></i>服务活动
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="activities-tab" data-bs-toggle="pill" data-bs-target="#activities" type="button" role="tab">
                        <i class="fas fa-calendar-alt me-2"></i>活动规划
                    </button>
                </li>
            </ul>
        </div>
    </section>

    <!-- 主要内容 -->
    <section class="py-5" id="party-activities">
        <div class="container">
            <div class="tab-content" id="partyTabsContent">

                <!-- 党史学习模块 -->
                <div class="tab-pane fade show active" id="history" role="tabpanel">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-danger">党史学习教育</h2>
                        <p class="text-muted">学习党的光辉历史，传承红色基因</p>
                    </div>

                    <!-- 学习进度 -->
                    <div class="row mb-4">
                        <div class="col-lg-12">
                            <div class="card border-0 shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title text-danger">
                                        <i class="fas fa-chart-line me-2"></i>我的学习进度
                                    </h5>
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <div class="text-center">
                                                <div class="position-relative d-inline-block">
                                                    <svg width="80" height="80" class="progress-ring">
                                                        <circle cx="40" cy="40" r="35" stroke="#e9ecef" stroke-width="8" fill="transparent"/>
                                                        <circle cx="40" cy="40" r="35" stroke="#dc3545" stroke-width="8" fill="transparent"
                                                                stroke-dasharray="220" stroke-dashoffset="77" stroke-linecap="round"/>
                                                    </svg>
                                                    <div class="position-absolute top-50 start-50 translate-middle">
                                                        <span class="fw-bold text-danger">65%</span>
                                                    </div>
                                                </div>
                                                <small class="text-muted d-block mt-2">总体进度</small>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row g-2">
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-video text-danger me-2"></i>
                                                        <span>视频学习：12/20</span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-file-alt text-warning me-2"></i>
                                                        <span>文档阅读：8/15</span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-comments text-success me-2"></i>
                                                        <span>讨论参与：5次</span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-trophy text-info me-2"></i>
                                                        <span>获得积分：850分</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 学习内容 -->
                    <div class="row g-4">
                        <!-- 建党历程 -->
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="fas fa-star me-2"></i>建党历程
                                    </h6>
                                    <button class="btn btn-sm btn-light" onclick="addNewContent('party-founding')" title="添加内容">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('party-founding')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">中国共产党的诞生(1921)</h6>
                                                <small class="text-success">已完成</small>
                                            </div>
                                            <p class="mb-1">中共一大召开，马克思主义与中国工人运动相结合</p>
                                            <small class="text-muted">
                                                <i class="fas fa-map-marker-alt me-1"></i>上海、嘉兴
                                                <i class="fas fa-users ms-2 me-1"></i>13名代表
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('early-struggle')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">土地革命战争(1927-1937)</h6>
                                                <small class="text-warning">进行中</small>
                                            </div>
                                            <p class="mb-1">南昌起义、秋收起义，井冈山革命根据地建立</p>
                                            <small class="text-muted">
                                                <i class="fas fa-mountain me-1"></i>井冈山
                                                <i class="fas fa-flag ms-2 me-1"></i>武装斗争
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('anti-japanese')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">抗日战争(1937-1945)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">全民族抗战的中流砥柱，敌后战场的开辟</p>
                                            <small class="text-muted">
                                                <i class="fas fa-shield-alt me-1"></i>敌后根据地
                                                <i class="fas fa-handshake ms-2 me-1"></i>统一战线
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('liberation-war')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">解放战争(1945-1949)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">三大战役胜利，推翻国民党反动统治</p>
                                            <small class="text-muted">
                                                <i class="fas fa-trophy me-1"></i>三大战役
                                                <i class="fas fa-star ms-2 me-1"></i>新中国成立
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('new-china-founding')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">新中国成立(1949-1956)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">中华人民共和国成立，社会主义改造完成</p>
                                            <small class="text-muted">
                                                <i class="fas fa-flag me-1"></i>开国大典
                                                <i class="fas fa-industry ms-2 me-1"></i>社会主义改造
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('first-cooperation')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">第一次国共合作(1924-1927)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">统一战线的伟大实践，国民革命的兴起</p>
                                            <small class="text-muted">
                                                <i class="fas fa-handshake me-1"></i>统一战线
                                                <i class="fas fa-users ms-2 me-1"></i>国民革命
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('socialist-construction')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">社会主义建设探索(1956-1966)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">艰辛探索与宝贵经验，社会主义建设的初步实践</p>
                                            <small class="text-muted">
                                                <i class="fas fa-cogs me-1"></i>建设探索
                                                <i class="fas fa-chart-line ms-2 me-1"></i>经济发展
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('cultural-revolution')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">文化大革命的教训(1966-1976)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">深刻的历史教训，为改革开放提供重要借鉴</p>
                                            <small class="text-muted">
                                                <i class="fas fa-exclamation-triangle me-1"></i>历史教训
                                                <i class="fas fa-book ms-2 me-1"></i>经验总结
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('reform-preparation')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">改革开放的思想准备(1976-1978)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">拨乱反正与思想解放，为改革开放奠定基础</p>
                                            <small class="text-muted">
                                                <i class="fas fa-lightbulb me-1"></i>思想解放
                                                <i class="fas fa-search ms-2 me-1"></i>真理标准
                                            </small>
                                        </a>
                                    </div>

                                    <!-- 分页导航 -->
                                    <div class="card-footer bg-light">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">第 <span id="partyCurrentPage">1</span> 页，共 <span id="partyTotalPages">2</span> 页</small>
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-outline-danger" id="partyPrevBtn" onclick="changePartyPage(-1)" disabled>
                                                    <i class="fas fa-chevron-left"></i> 上一页
                                                </button>
                                                <button class="btn btn-outline-danger" id="partyNextBtn" onclick="changePartyPage(1)">
                                                    下一页 <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 改革开放 -->
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-warning text-white d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="fas fa-rocket me-2"></i>改革开放
                                    </h6>
                                    <button class="btn btn-sm btn-light" onclick="addNewContent('reform-opening')" title="添加内容">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('reform-opening')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">改革开放启航(1978)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">十一届三中全会，工作重心转移到经济建设</p>
                                            <small class="text-muted">
                                                <i class="fas fa-calendar me-1"></i>1978年12月
                                                <i class="fas fa-lightbulb ms-2 me-1"></i>思想解放
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('special-zones')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">经济特区建设(1980s)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">深圳、珠海、汕头、厦门特区设立</p>
                                            <small class="text-muted">
                                                <i class="fas fa-city me-1"></i>四大特区
                                                <i class="fas fa-rocket ms-2 me-1"></i>先行先试
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('market-economy')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">市场经济体制(1992)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">邓小平南方谈话，确立社会主义市场经济</p>
                                            <small class="text-muted">
                                                <i class="fas fa-chart-line me-1"></i>市场经济
                                                <i class="fas fa-globe ms-2 me-1"></i>南方谈话
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('wto-entry')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">加入WTO(2001)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">中国正式加入世界贸易组织，全面融入世界经济</p>
                                            <small class="text-muted">
                                                <i class="fas fa-handshake me-1"></i>WTO
                                                <i class="fas fa-world ms-2 me-1"></i>全球化
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('reform-achievements')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">改革开放成就</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">经济总量跃居世界第二，人民生活显著改善</p>
                                            <small class="text-muted">
                                                <i class="fas fa-trophy me-1"></i>世界第二
                                                <i class="fas fa-heart ms-2 me-1"></i>民生改善
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('deng-theory')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">邓小平理论形成(1978-1997)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">中国特色社会主义理论体系的开篇之作</p>
                                            <small class="text-muted">
                                                <i class="fas fa-brain me-1"></i>理论创新
                                                <i class="fas fa-road ms-2 me-1"></i>中国道路
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('three-represents')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">"三个代表"重要思想(1997-2002)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">新世纪党的建设和发展的重要指导思想</p>
                                            <small class="text-muted">
                                                <i class="fas fa-users me-1"></i>三个代表
                                                <i class="fas fa-forward ms-2 me-1"></i>与时俱进
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('scientific-development')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">科学发展观(2002-2012)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">统筹兼顾，全面协调可持续发展</p>
                                            <small class="text-muted">
                                                <i class="fas fa-balance-scale me-1"></i>科学发展
                                                <i class="fas fa-leaf ms-2 me-1"></i>可持续
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('opening-up-expansion')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">对外开放全面扩大(1980-2010)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">从沿海到内地，从贸易到投资的全方位开放</p>
                                            <small class="text-muted">
                                                <i class="fas fa-globe me-1"></i>全面开放
                                                <i class="fas fa-exchange-alt ms-2 me-1"></i>国际合作
                                            </small>
                                        </a>
                                    </div>

                                    <!-- 分页导航 -->
                                    <div class="card-footer bg-light">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">第 <span id="reformCurrentPage">1</span> 页，共 <span id="reformTotalPages">2</span> 页</small>
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-outline-warning" id="reformPrevBtn" onclick="changeReformPage(-1)" disabled>
                                                    <i class="fas fa-chevron-left"></i> 上一页
                                                </button>
                                                <button class="btn btn-outline-warning" id="reformNextBtn" onclick="changeReformPage(1)">
                                                    下一页 <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 新时代 -->
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="fas fa-flag me-2"></i>新时代
                                    </h6>
                                    <button class="btn btn-sm btn-light" onclick="addNewContent('new-era')" title="添加内容">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('new-era')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">新时代开启(2012-至今)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">习近平新时代中国特色社会主义思想指导</p>
                                            <small class="text-muted">
                                                <i class="fas fa-star me-1"></i>新思想
                                                <i class="fas fa-compass ms-2 me-1"></i>新征程
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('great-rejuvenation')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">中华民族伟大复兴</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">中国梦的提出与实践，"两个一百年"奋斗目标</p>
                                            <small class="text-muted">
                                                <i class="fas fa-flag me-1"></i>中国梦
                                                <i class="fas fa-target ms-2 me-1"></i>百年目标
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('party-building')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">全面从严治党</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">党的建设新的伟大工程，反腐败斗争压倒性胜利</p>
                                            <small class="text-muted">
                                                <i class="fas fa-shield-alt me-1"></i>从严治党
                                                <i class="fas fa-gavel ms-2 me-1"></i>反腐倡廉
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('poverty-alleviation')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">脱贫攻坚战</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">全面建成小康社会，消除绝对贫困</p>
                                            <small class="text-muted">
                                                <i class="fas fa-heart me-1"></i>脱贫攻坚
                                                <i class="fas fa-home ms-2 me-1"></i>小康社会
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('modernization')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">社会主义现代化强国</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">全面建设社会主义现代化国家新征程</p>
                                            <small class="text-muted">
                                                <i class="fas fa-rocket me-1"></i>现代化
                                                <i class="fas fa-globe ms-2 me-1"></i>强国建设
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('belt-road-initiative')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">"一带一路"倡议(2013-至今)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">构建人类命运共同体的重要实践</p>
                                            <small class="text-muted">
                                                <i class="fas fa-road me-1"></i>一带一路
                                                <i class="fas fa-handshake ms-2 me-1"></i>命运共同体
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('covid-response')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">抗击新冠疫情(2020-2022)</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">人民至上、生命至上的伟大抗疫精神</p>
                                            <small class="text-muted">
                                                <i class="fas fa-shield-virus me-1"></i>抗疫精神
                                                <i class="fas fa-heart ms-2 me-1"></i>人民至上
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('ecological-civilization')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">生态文明建设</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">绿水青山就是金山银山，美丽中国建设</p>
                                            <small class="text-muted">
                                                <i class="fas fa-leaf me-1"></i>生态文明
                                                <i class="fas fa-mountain ms-2 me-1"></i>美丽中国
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('common-prosperity')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">共同富裕示范区建设</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">扎实推动共同富裕，实现全体人民共同富裕</p>
                                            <small class="text-muted">
                                                <i class="fas fa-balance-scale me-1"></i>共同富裕
                                                <i class="fas fa-users ms-2 me-1"></i>全体人民
                                            </small>
                                        </a>
                                        <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('digital-china')">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">数字中国建设</h6>
                                                <small class="text-muted">未开始</small>
                                            </div>
                                            <p class="mb-1">数字化转型，建设网络强国、数字中国</p>
                                            <small class="text-muted">
                                                <i class="fas fa-laptop me-1"></i>数字化
                                                <i class="fas fa-wifi ms-2 me-1"></i>网络强国
                                            </small>
                                        </a>
                                    </div>

                                    <!-- 分页导航 -->
                                    <div class="card-footer bg-light">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-muted">第 <span id="newEraCurrentPage">1</span> 页，共 <span id="newEraTotalPages">2</span> 页</small>
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-outline-success" id="newEraPrevBtn" onclick="changeNewEraPage(-1)" disabled>
                                                    <i class="fas fa-chevron-left"></i> 上一页
                                                </button>
                                                <button class="btn btn-outline-success" id="newEraNextBtn" onclick="changeNewEraPage(1)">
                                                    下一页 <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 互动学习 -->
                    <div class="row mt-4">
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="fas fa-newspaper me-2"></i>党支部活动报道
                                    </h6>
                                    <button class="btn btn-sm btn-light" onclick="openArticleManager()" title="管理文章">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="articlesList">
                                        <div class="article-item mb-3 p-3 border rounded">
                                            <div class="d-flex justify-content-between align-items-start">
                                                <div class="flex-grow-1">
                                                    <h6 class="mb-1">
                                                        <a href="#" class="text-decoration-none" onclick="readArticle('article1')">
                                                            自动化学院物联网党支部开展"学习二十大精神"主题党日活动
                                                        </a>
                                                    </h6>
                                                    <p class="text-muted small mb-1">为深入学习贯彻党的二十大精神，12月10日，自动化学院物联网党支部组织全体党员开展主题党日活动...</p>
                                                    <small class="text-muted">
                                                        <i class="fas fa-calendar me-1"></i>2024-12-10
                                                        <i class="fas fa-user ms-2 me-1"></i>党支部宣传委员
                                                    </small>
                                                </div>
                                                <img src="images/2.png" alt="活动照片" class="ms-3 rounded" style="width: 80px; height: 60px; object-fit: cover;">
                                            </div>
                                        </div>

                                        <div class="article-item mb-3 p-3 border rounded">
                                            <div class="d-flex justify-content-between align-items-start">
                                                <div class="flex-grow-1">
                                                    <h6 class="mb-1">
                                                        <a href="#" class="text-decoration-none" onclick="readArticle('article2')">
                                                            "心语同行"心理健康服务志愿活动圆满结束
                                                        </a>
                                                    </h6>
                                                    <p class="text-muted small mb-1">12月8日，物联网党支部组织党员志愿者开展"心语同行"心理健康服务活动，为同学们提供心理咨询和情感支持...</p>
                                                    <small class="text-muted">
                                                        <i class="fas fa-calendar me-1"></i>2024-12-08
                                                        <i class="fas fa-user ms-2 me-1"></i>志愿服务队
                                                    </small>
                                                </div>
                                                <img src="images/1.jpg" alt="志愿服务" class="ms-3 rounded" style="width: 80px; height: 60px; object-fit: cover;">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-outline-info btn-sm" onclick="viewMoreArticles()">
                                            <i class="fas fa-plus me-2"></i>查看更多报道
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-map-marked-alt me-2"></i>红色教育地图
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <!-- 地图区域选择 -->
                                    <div class="mb-3">
                                        <div class="btn-group w-100" role="group">
                                            <button type="button" class="btn btn-outline-primary btn-sm active" onclick="showRedSites('guangdong')">广东省</button>
                                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="showRedSites('national')">全国</button>
                                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="showRedSites('nearby')">附近</button>
                                        </div>
                                    </div>

                                    <!-- 红色教育基地列表 -->
                                    <div id="redSitesList">
                                        <div class="red-site-item mb-2 p-2 border rounded">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-0">黄埔军校旧址</h6>
                                                    <small class="text-muted">
                                                        <i class="fas fa-map-marker-alt me-1"></i>广州市黄埔区
                                                        <i class="fas fa-star ms-2 me-1"></i>5A级景区
                                                    </small>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewSiteDetail('huangpu')">详情</button>
                                            </div>
                                        </div>

                                        <div class="red-site-item mb-2 p-2 border rounded">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-0">广州起义纪念馆</h6>
                                                    <small class="text-muted">
                                                        <i class="fas fa-map-marker-alt me-1"></i>广州市越秀区
                                                        <i class="fas fa-history ms-2 me-1"></i>革命历史
                                                    </small>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewSiteDetail('guangzhou-uprising')">详情</button>
                                            </div>
                                        </div>

                                        <div class="red-site-item mb-2 p-2 border rounded">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-0">海陆丰革命根据地</h6>
                                                    <small class="text-muted">
                                                        <i class="fas fa-map-marker-alt me-1"></i>汕尾市海丰县
                                                        <i class="fas fa-flag ms-2 me-1"></i>革命根据地
                                                    </small>
                                                </div>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewSiteDetail('hailufeng')">详情</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center mt-3">
                                        <button class="btn btn-primary btn-sm" onclick="planRedRoute()">
                                            <i class="fas fa-route me-2"></i>规划参观路线
                                        </button>
                                        <button class="btn btn-outline-primary btn-sm ms-2" onclick="openVirtualTour()">
                                            <i class="fas fa-vr-cardboard me-2"></i>虚拟参观
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 理论研讨模块 -->
                <div class="tab-pane fade" id="theory" role="tabpanel">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-warning">理论学习研讨</h2>
                        <p class="text-muted">深入学习党的创新理论，提升思想政治素养</p>
                    </div>

                    <!-- 研讨主题 -->
                    <div class="row g-4 mb-4">
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-warning text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-comments me-2"></i>热门研讨话题
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">如何理解新时代党的建设总要求？</h6>
                                                <small class="text-success">进行中</small>
                                            </div>
                                            <p class="mb-1">深入探讨新时代党的建设总要求的深刻内涵和实践意义</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">参与人数：23人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="joinDiscussion('party-building-requirements')">参与讨论</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">大学生如何践行社会主义核心价值观？</h6>
                                                <small class="text-info">热门</small>
                                            </div>
                                            <p class="mb-1">结合大学生实际，探讨践行社会主义核心价值观的具体路径</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">参与人数：45人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="joinDiscussion('core-values')">参与讨论</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">科技创新与党建工作如何深度融合？</h6>
                                                <small class="text-primary">新话题</small>
                                            </div>
                                            <p class="mb-1">探讨在数字化时代如何运用科技手段创新党建工作</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">参与人数：12人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="joinDiscussion('tech-party-building')">参与讨论</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-success text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-trophy me-2"></i>研讨排行榜
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-0">张同学</h6>
                                                <small class="text-muted">自动化学院</small>
                                            </div>
                                            <span class="badge bg-warning rounded-pill">1250分</span>
                                        </div>
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-0">李同学</h6>
                                                <small class="text-muted">计算机学院</small>
                                            </div>
                                            <span class="badge bg-warning rounded-pill">1180分</span>
                                        </div>
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-0">王同学</h6>
                                                <small class="text-muted">管理学院</small>
                                            </div>
                                            <span class="badge bg-warning rounded-pill">1050分</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 学习资源 -->
                    <div class="row g-4">
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-book me-2"></i>理论文献
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="openDocument('marxism-basics')">
                                                <i class="fas fa-file-pdf text-danger me-2"></i>马克思主义基本原理
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="openDocument('mao-thought')">
                                                <i class="fas fa-file-pdf text-danger me-2"></i>毛泽东思想概论
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="openDocument('deng-theory')">
                                                <i class="fas fa-file-pdf text-danger me-2"></i>邓小平理论
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="openDocument('xi-thought')">
                                                <i class="fas fa-file-pdf text-danger me-2"></i>习近平新时代中国特色社会主义思想
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-info text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-video me-2"></i>视频课程
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="playVideo('party-history')">
                                                <i class="fas fa-play-circle text-primary me-2"></i>中国共产党历史
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="playVideo('reform-opening')">
                                                <i class="fas fa-play-circle text-primary me-2"></i>改革开放史
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="playVideo('socialist-development')">
                                                <i class="fas fa-play-circle text-primary me-2"></i>社会主义发展史
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="playVideo('new-china')">
                                                <i class="fas fa-play-circle text-primary me-2"></i>新中国史
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-success text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-newspaper me-2"></i>时事热点
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="readNews('two-sessions')">
                                                <i class="fas fa-newspaper text-success me-2"></i>全国两会精神解读
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="readNews('economic-development')">
                                                <i class="fas fa-newspaper text-success me-2"></i>经济高质量发展
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="readNews('rural-revitalization')">
                                                <i class="fas fa-newspaper text-success me-2"></i>乡村振兴战略
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="#" class="text-decoration-none" onclick="readNews('carbon-neutrality')">
                                                <i class="fas fa-newspaper text-success me-2"></i>碳达峰碳中和
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 服务活动模块 -->
                <div class="tab-pane fade" id="volunteer" role="tabpanel">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-success">服务活动</h2>
                        <p class="text-muted">发挥党员先锋模范作用，服务师生，奉献社会</p>
                    </div>

                    <!-- 服务统计 -->
                    <div class="row mb-4">
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-users fa-2x text-success mb-2"></i>
                                    <h4 class="text-success">50+</h4>
                                    <p class="text-muted mb-0">志愿者</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-clock fa-2x text-info mb-2"></i>
                                    <h4 class="text-info">1200+</h4>
                                    <p class="text-muted mb-0">服务时长(小时)</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-heart fa-2x text-danger mb-2"></i>
                                    <h4 class="text-danger">800+</h4>
                                    <p class="text-muted mb-0">受益人次</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-trophy fa-2x text-warning mb-2"></i>
                                    <h4 class="text-warning">15+</h4>
                                    <p class="text-muted mb-0">获得荣誉</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 服务项目 -->
                    <div class="row g-4">
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-heart me-2"></i>心理健康服务
                                    </h5>
                                    <button class="btn btn-sm btn-light admin-only" onclick="editContent('volunteer', 'mental-health')" title="编辑服务" style="display: none;">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">心理健康知识宣讲</h6>
                                                <small class="text-success">进行中</small>
                                            </div>
                                            <p class="mb-1">面向新生开展心理健康知识普及活动</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：5人</small>
                                                <button class="btn btn-sm btn-outline-success" onclick="applyVolunteer('mental-health-lecture')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">心理测评协助</h6>
                                                <small class="text-warning">招募中</small>
                                            </div>
                                            <p class="mb-1">协助师生进行心理健康测评和结果解读</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：8人</small>
                                                <button class="btn btn-sm btn-outline-success" onclick="applyVolunteer('assessment-assist')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">心理咨询陪伴</h6>
                                                <small class="text-info">长期项目</small>
                                            </div>
                                            <p class="mb-1">为有需要的同学提供心理支持和陪伴</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：10人</small>
                                                <button class="btn btn-sm btn-outline-success" onclick="applyVolunteer('counseling-support')">报名参与</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-graduation-cap me-2"></i>学业帮扶服务
                                    </h5>
                                    <button class="btn btn-sm btn-light admin-only" onclick="editContent('volunteer', 'academic-support')" title="编辑服务" style="display: none;">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">学习方法指导</h6>
                                                <small class="text-success">进行中</small>
                                            </div>
                                            <p class="mb-1">为学习困难的同学提供学习方法指导</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：6人</small>
                                                <button class="btn btn-sm btn-outline-primary" onclick="applyVolunteer('study-guidance')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">专业课程辅导</h6>
                                                <small class="text-warning">招募中</small>
                                            </div>
                                            <p class="mb-1">为低年级同学提供专业课程辅导</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：12人</small>
                                                <button class="btn btn-sm btn-outline-primary" onclick="applyVolunteer('course-tutoring')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">考研经验分享</h6>
                                                <small class="text-info">定期举办</small>
                                            </div>
                                            <p class="mb-1">组织考研成功的学长学姐分享经验</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：4人</small>
                                                <button class="btn btn-sm btn-outline-primary" onclick="applyVolunteer('postgrad-sharing')">报名参与</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 社区服务 -->
                    <div class="row g-4 mt-2">
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-warning text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-home me-2"></i>社区服务
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">智能设备使用培训</h6>
                                                <small class="text-success">进行中</small>
                                            </div>
                                            <p class="mb-1">为社区老年人提供智能手机、电脑使用培训</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：8人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="applyVolunteer('tech-training')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">环境保护宣传</h6>
                                                <small class="text-warning">招募中</small>
                                            </div>
                                            <p class="mb-1">开展垃圾分类、节能减排等环保宣传活动</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：10人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="applyVolunteer('env-protection')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">关爱留守儿童</h6>
                                                <small class="text-info">长期项目</small>
                                            </div>
                                            <p class="mb-1">为留守儿童提供学习辅导和心理关爱</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：15人</small>
                                                <button class="btn btn-sm btn-outline-warning" onclick="applyVolunteer('child-care')">报名参与</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-hands-helping me-2"></i>特色服务
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="list-group list-group-flush">
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">科技创新展示</h6>
                                                <small class="text-success">进行中</small>
                                            </div>
                                            <p class="mb-1">向社区居民展示物联网、AI等前沿科技</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：6人</small>
                                                <button class="btn btn-sm btn-outline-info" onclick="applyVolunteer('tech-demo')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">数字化服务</h6>
                                                <small class="text-warning">招募中</small>
                                            </div>
                                            <p class="mb-1">协助社区建设数字化服务平台</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：5人</small>
                                                <button class="btn btn-sm btn-outline-info" onclick="applyVolunteer('digital-service')">报名参与</button>
                                            </div>
                                        </div>
                                        <div class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1">应急救援培训</h6>
                                                <small class="text-info">定期举办</small>
                                            </div>
                                            <p class="mb-1">开展应急救援知识和技能培训</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">需要志愿者：8人</small>
                                                <button class="btn btn-sm btn-outline-info" onclick="applyVolunteer('emergency-training')">报名参与</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 活动规划模块 -->
                <div class="tab-pane fade" id="activities" role="tabpanel">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-info">活动规划管理</h2>
                        <p class="text-muted">系统规划党建和志愿服务活动，确保活动有序开展</p>
                    </div>

                    <!-- 活动日历 -->
                    <div class="row mb-4">
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-calendar-alt me-2"></i>活动日历
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>日期</th>
                                                    <th>活动名称</th>
                                                    <th>类型</th>
                                                    <th>状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>12月15日</td>
                                                    <td>党史学习专题讲座</td>
                                                    <td><span class="badge bg-danger">党建教育</span></td>
                                                    <td><span class="badge bg-success">进行中</span></td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-info me-1" onclick="viewActivity('party-lecture')">查看详情</button>
                                                        <button class="btn btn-sm btn-outline-warning admin-only" onclick="editContent('activity', 'party-lecture')" title="编辑活动" style="display: none;">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>12月18日</td>
                                                    <td>心理健康知识宣讲</td>
                                                    <td><span class="badge bg-success">志愿服务</span></td>
                                                    <td><span class="badge bg-warning">准备中</span></td>
                                                    <td><button class="btn btn-sm btn-outline-info" onclick="viewActivity('mental-health-talk')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>12月20日</td>
                                                    <td>社区科技展示活动</td>
                                                    <td><span class="badge bg-primary">社区服务</span></td>
                                                    <td><span class="badge bg-warning">准备中</span></td>
                                                    <td><button class="btn btn-sm btn-outline-info" onclick="viewActivity('tech-exhibition')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>12月22日</td>
                                                    <td>理论学习研讨会</td>
                                                    <td><span class="badge bg-warning">理论研讨</span></td>
                                                    <td><span class="badge bg-secondary">计划中</span></td>
                                                    <td><button class="btn btn-sm btn-outline-info" onclick="viewActivity('theory-seminar')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>12月25日</td>
                                                    <td>新年志愿服务活动</td>
                                                    <td><span class="badge bg-success">志愿服务</span></td>
                                                    <td><span class="badge bg-secondary">计划中</span></td>
                                                    <td><button class="btn btn-sm btn-outline-info" onclick="viewActivity('new-year-service')">查看详情</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h6 class="mb-0">
                                        <i class="fas fa-plus me-2"></i>创建新活动
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <form id="newActivityForm">
                                        <div class="mb-3">
                                            <label for="activityName" class="form-label">活动名称</label>
                                            <input type="text" class="form-control" id="activityName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="activityType" class="form-label">活动类型</label>
                                            <select class="form-select" id="activityType" required>
                                                <option value="">请选择类型</option>
                                                <option value="party-building">党建教育</option>
                                                <option value="volunteer">志愿服务</option>
                                                <option value="theory">理论研讨</option>
                                                <option value="community">社区服务</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="activityDate" class="form-label">活动时间</label>
                                            <input type="datetime-local" class="form-control" id="activityDate" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="activityLocation" class="form-label">活动地点</label>
                                            <input type="text" class="form-control" id="activityLocation" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="activityDescription" class="form-label">活动描述</label>
                                            <textarea class="form-control" id="activityDescription" rows="3" required></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100">
                                            <i class="fas fa-plus me-2"></i>创建活动
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 活动统计 -->
                    <div class="row">
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-calendar-check fa-2x text-success mb-2"></i>
                                    <h4 class="text-success">25</h4>
                                    <p class="text-muted mb-0">本月活动</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-users fa-2x text-primary mb-2"></i>
                                    <h4 class="text-primary">680</h4>
                                    <p class="text-muted mb-0">参与人次</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-star fa-2x text-warning mb-2"></i>
                                    <h4 class="text-warning">4.8</h4>
                                    <p class="text-muted mb-0">平均评分</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card border-0 shadow-sm text-center">
                                <div class="card-body">
                                    <i class="fas fa-chart-line fa-2x text-info mb-2"></i>
                                    <h4 class="text-info">95%</h4>
                                    <p class="text-muted mb-0">完成率</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 数据统计 -->
    <section class="py-5">
        <div class="container">
            <div class="row text-center">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-item">
                        <h3 class="display-4 fw-bold text-danger">50+</h3>
                        <p class="text-muted">党员志愿者</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-item">
                        <h3 class="display-4 fw-bold text-danger">100+</h3>
                        <p class="text-muted">党建活动</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-item">
                        <h3 class="display-4 fw-bold text-danger">1000+</h3>
                        <p class="text-muted">服务师生</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-item">
                        <h3 class="display-4 fw-bold text-danger">20+</h3>
                        <p class="text-muted">合作单位</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-5 text-white" style="background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);">
        <div class="container text-center">
            <h2 class="fw-bold mb-3">加入党建引领的心理健康服务</h2>
            <p class="lead mb-4">
                传承红色精神，服务师生成长，共建和谐校园
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <a href="community.html" class="btn btn-light btn-lg">
                    <i class="fas fa-users me-2"></i>加入社区
                </a>
                <a href="about.html" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-info-circle me-2"></i>了解更多
                </a>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="text-primary mb-3">智慧驿站·心语同行</h5>
                    <p class="text-muted">
                        以党建引领为核心，融合心理健康服务的创新平台，
                        为师生提供专业、温暖、便捷的心理健康支持。
                    </p>
                </div>

                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-primary mb-3">服务平台</h6>
                    <ul class="list-unstyled">
                        <li><a href="assessment.html" class="text-muted text-decoration-none">心理测评</a></li>
                        <li><a href="consultation.html" class="text-muted text-decoration-none">在线咨询</a></li>
                        <li><a href="activities.html" class="text-muted text-decoration-none">党建空间</a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-primary mb-3">社区</h6>
                    <ul class="list-unstyled">
                        <li><a href="community.html" class="text-muted text-decoration-none">讨论区</a></li>
                        <li><a href="about.html" class="text-muted text-decoration-none">关于我们</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <h6 class="text-primary mb-3">联系方式</h6>
                    <ul class="list-unstyled text-muted">
                        <li><i class="fas fa-envelope me-2"></i>1403073295@qq.com</li>
                        <li><i class="fas fa-user me-2"></i>技术联系人：李康锐</li>
                        <li><i class="fas fa-university me-2"></i>广东工业大学自动化学院本科物联网党支部维护管理</li>
                    </ul>
                </div>
            </div>

            <hr class="my-4">

            <div class="row align-items-center">
                <div class="col-md-12 text-center">
                    <p class="text-muted mb-0">
                        &copy; 2024 智慧驿站·心语同行. 保留所有权利.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- 用户状态管理 -->
    <script src="js/user-status.js"></script>

    <!-- 党建空间功能脚本 -->
    <script>
        // 初始化标签页功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成，初始化标签页功能');

            // 简化的标签页切换功能
            const tabButtons = document.querySelectorAll('#partyTabs button');
            const tabPanes = document.querySelectorAll('.tab-pane');

            console.log('找到标签按钮数量:', tabButtons.length);
            console.log('找到内容面板数量:', tabPanes.length);

            tabButtons.forEach(function(button, index) {
                console.log(`为按钮 ${index} 添加点击事件:`, button.textContent.trim());

                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('点击了标签:', this.textContent.trim());

                    // 移除所有活动状态
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanes.forEach(pane => {
                        pane.classList.remove('show', 'active');
                    });

                    // 添加当前按钮的活动状态
                    this.classList.add('active');

                    // 显示对应的内容面板
                    const targetId = this.getAttribute('data-bs-target');
                    console.log('目标面板ID:', targetId);

                    const targetPane = document.querySelector(targetId);
                    if (targetPane) {
                        targetPane.classList.add('show', 'active');
                        console.log('成功显示面板:', targetId);
                    } else {
                        console.error('未找到目标面板:', targetId);
                    }
                });
            });
        });

        // 党史学习功能
        function openLearningContent(contentId) {
            const contentMap = {
                'party-founding': {
                    title: '中国共产党的诞生(1921)',
                    subtitle: '开天辟地的大事变',
                    content: `
                        <h4>历史背景</h4>
                        <p>20世纪初，中华民族面临着前所未有的危机。帝国主义列强的侵略，封建主义的腐朽统治，使得中国人民生活在水深火热之中。五四运动的爆发，标志着中国新民主主义革命的开端，马克思主义在中国的传播为中国共产党的成立奠定了思想基础。</p>

                        <h4>成立过程</h4>
                        <p>1921年7月23日，中国共产党第一次全国代表大会在上海法租界望志路106号（今兴业路76号）召开。来自全国各地的13名代表，代表着50多名党员，在这里聚集一堂。由于法租界巡捕的干扰，会议转移到浙江嘉兴南湖的红船上继续进行。</p>

                        <h4>重要意义</h4>
                        <p>中国共产党的成立，是中国历史上开天辟地的大事变。它深刻改变了近代以后中华民族发展的方向和进程，深刻改变了中国人民和中华民族的前途和命运，深刻改变了世界发展的趋势和格局。从此，中国人民有了主心骨，中华民族有了领路人。</p>

                        <h4>理论基础</h4>
                        <p>中国共产党以马克思列宁主义为指导思想，把马克思主义基本原理同中国具体实际相结合，为中国革命指明了正确方向。党的一大通过的纲领明确提出了党的奋斗目标：推翻资产阶级政权，建立无产阶级专政，消灭阶级差别。</p>
                    `,
                    keyPoints: ['13名代表', '50多名党员', '马克思主义指导', '工人阶级政党', '红船精神'],
                    locations: ['上海兴业路76号', '嘉兴南湖红船'],
                    significance: '标志着中国共产党的正式成立，中国革命的面貌从此焕然一新'
                },
                'early-struggle': {
                    title: '土地革命战争(1927-1937)',
                    subtitle: '探索中国革命道路',
                    content: `
                        <h4>历史背景</h4>
                        <p>1927年，蒋介石发动"四一二"反革命政变，汪精卫发动"七一五"反革命政变，轰轰烈烈的大革命失败了。中国共产党和中国人民并没有被吓倒、被征服、被杀绝，他们从地下爬起来，揩干净身上的血迹，掩埋好同伴的尸首，又继续战斗了。</p>

                        <h4>武装起义</h4>
                        <p>南昌起义打响了武装反抗国民党反动派的第一枪，标志着中国共产党独立领导革命战争的开始。秋收起义虽然在攻打长沙时受挫，但毛泽东及时调整策略，率领起义部队向井冈山进军，建立了第一个农村革命根据地。</p>

                        <h4>革命道路</h4>
                        <p>在血与火的斗争中，中国共产党逐步探索出了一条符合中国国情的革命道路——"农村包围城市、武装夺取政权"。这条道路的形成，是马克思主义中国化的重要成果，为中国革命的胜利指明了方向。</p>

                        <h4>理论创新</h4>
                        <p>毛泽东在《中国的红色政权为什么能够存在？》《井冈山的斗争》等著作中，科学分析了中国社会的特点，论证了红色政权存在和发展的可能性，形成了关于农村包围城市革命道路的理论。</p>
                    `,
                    keyPoints: ['南昌起义', '秋收起义', '井冈山根据地', '农村包围城市', '红军长征'],
                    locations: ['南昌', '井冈山', '瑞金', '遵义', '延安'],
                    significance: '探索出了符合中国国情的革命道路，为夺取全国胜利奠定了基础'
                },
                'anti-japanese': {
                    title: '抗日战争(1937-1945)',
                    subtitle: '全民族抗战的中流砥柱',
                    content: `
                        <h4>历史背景</h4>
                        <p>1937年7月7日，日本帝国主义发动全面侵华战争，中华民族到了最危险的时候。面对民族危亡，中国共产党以民族大义为重，积极推动建立抗日民族统一战线，团结一切可以团结的力量，共同抗击日本侵略者。</p>

                        <h4>战略方针</h4>
                        <p>中国共产党制定了全面抗战路线，提出了持久战的战略方针。毛泽东在《论持久战》中科学分析了中日双方的特点，预见了抗日战争的发展过程，坚定了全国人民抗战必胜的信心。</p>

                        <h4>敌后战场</h4>
                        <p>八路军、新四军深入敌后，开辟了广大的敌后战场，建立了19个抗日根据地。敌后战场牵制了大量日军，成为抗日战争的重要组成部分，为抗战胜利作出了重大贡献。</p>

                        <h4>理论贡献</h4>
                        <p>在抗日战争中，中国共产党丰富和发展了马克思主义军事理论，形成了人民战争的战略战术，创造了游击战争的丰富经验，为世界反法西斯战争提供了宝贵的理论财富。</p>
                    `,
                    keyPoints: ['统一战线', '持久战', '敌后战场', '人民战争', '中流砥柱'],
                    locations: ['延安', '太行山', '沂蒙山', '大别山', '晋察冀'],
                    significance: '成为全民族抗战的中流砥柱，为抗日战争胜利发挥了决定性作用'
                },
                'liberation-war': {
                    title: '解放战争(1945-1949)',
                    subtitle: '推翻三座大山的伟大胜利',
                    content: `
                        <h4>历史背景</h4>
                        <p>抗日战争胜利后，中国面临着两种前途、两种命运的决战。中国共产党为争取和平民主，与国民党进行了重庆谈判，签署了《双十协定》。但蒋介石集团在美帝国主义支持下，悍然发动全面内战。</p>

                        <h4>战略决策</h4>
                        <p>面对国民党的军事进攻，中国共产党制定了正确的战略方针：在政治上，揭露国民党反动派的内战阴谋；在军事上，实行积极防御，集中优势兵力，各个歼灭敌人。</p>

                        <h4>三大战役</h4>
                        <p>辽沈、淮海、平津三大战役的胜利，基本消灭了国民党军队的主力，为解放全中国奠定了基础。这三大战役体现了人民解放军高超的军事艺术和中国共产党卓越的军事指挥才能。</p>

                        <h4>理论意义</h4>
                        <p>解放战争的胜利，验证了毛泽东军事思想的正确性，丰富了马克思主义军事理论。《论人民民主专政》等重要著作，为即将诞生的新中国指明了前进方向。</p>
                    `,
                    keyPoints: ['重庆谈判', '土地改革', '三大战役', '渡江战役', '人民民主专政'],
                    locations: ['重庆', '延安', '西柏坡', '锦州', '徐州'],
                    significance: '推翻了压在中国人民头上的三座大山，建立了人民当家作主的新中国'
                },
                'new-china-founding': {
                    title: '新中国成立(1949-1956)',
                    subtitle: '中华民族站起来了',
                    content: `
                        <h4>历史意义</h4>
                        <p>1949年10月1日，中华人民共和国成立，中国人民从此站起来了。这标志着中国新民主主义革命的基本胜利，半殖民地半封建社会的结束，为实现由新民主主义向社会主义的转变创造了前提。</p>

                        <h4>政权建设</h4>
                        <p>新中国成立后，中国共产党领导人民建立了人民民主专政的国家政权，制定了《共同纲领》，确立了人民代表大会制度、中国共产党领导的多党合作和政治协商制度、民族区域自治制度等基本政治制度。</p>

                        <h4>社会主义改造</h4>
                        <p>从1953年开始，中国共产党领导人民进行社会主义改造，对农业、手工业和资本主义工商业进行改造，创造性地实现了由新民主主义向社会主义的转变，确立了社会主义基本制度。</p>

                        <h4>理论建构</h4>
                        <p>在社会主义改造过程中，中国共产党丰富和发展了马克思主义关于社会主义革命的理论，探索了一条适合中国特点的社会主义改造道路，为社会主义建设奠定了制度基础。</p>
                    `,
                    keyPoints: ['开国大典', '抗美援朝', '土地改革', '社会主义改造', '第一个五年计划'],
                    locations: ['北京天安门', '中南海', '人民大会堂'],
                    significance: '确立了社会主义基本制度，为当代中国一切发展进步奠定了根本政治前提和制度基础'
                },
                'cultural-revolution': {
                    title: '文化大革命的教训(1966-1976)',
                    subtitle: '深刻的历史教训',
                    content: `
                        <h4>历史背景</h4>
                        <p>1966年5月至1976年10月，中国发生了"文化大革命"。这是一场由领导者错误发动，被反革命集团利用，给党、国家和各族人民带来严重灾难的内乱。</p>

                        <h4>错误理论</h4>
                        <p>"文化大革命"是基于对当时中国阶级斗争形势的错误估计和判断，认为党内存在一个"资产阶级司令部"，需要通过"大鸣、大放、大辩论、大字报"来进行所谓的"无产阶级专政下的继续革命"。</p>

                        <h4>严重后果</h4>
                        <p>这场内乱使党、国家和人民遭到新中国成立以来最严重的挫折和损失。大批干部和群众遭到迫害，国民经济发展缓慢，教育科学文化事业受到严重冲击。</p>

                        <h4>历史教训</h4>
                        <p>"文化大革命"的历史教训极其深刻：必须坚持民主集中制，反对个人崇拜；必须坚持实事求是的思想路线；必须健全社会主义法制，保障人民民主权利。</p>
                    `,
                    keyPoints: ['历史教训', '错误理论', '严重后果', '制度反思', '民主法制'],
                    locations: ['全国各地'],
                    significance: '提供了深刻的历史教训，为改革开放和社会主义现代化建设提供了重要借鉴'
                },
                'reform-preparation': {
                    title: '改革开放的思想准备(1976-1978)',
                    subtitle: '拨乱反正与思想解放',
                    content: `
                        <h4>拨乱反正</h4>
                        <p>1976年10月，"四人帮"被粉碎，"文化大革命"结束。党和国家面临着拨乱反正的艰巨任务，需要在政治、思想、组织等各个方面进行全面整顿。</p>

                        <h4>真理标准讨论</h4>
                        <p>1978年5月11日，《光明日报》发表《实践是检验真理的唯一标准》一文，引发了全国范围内的真理标准问题大讨论，为思想解放和改革开放奠定了思想基础。</p>

                        <h4>思想解放</h4>
                        <p>真理标准讨论冲破了"两个凡是"的思想禁锢，重新确立了实事求是的思想路线，为党的十一届三中全会的召开和改革开放的启动创造了思想条件。</p>

                        <h4>理论意义</h4>
                        <p>这一时期的思想解放运动，体现了马克思主义认识论的基本观点，强调了实践在认识中的决定作用，为马克思主义中国化的新发展开辟了道路。</p>
                    `,
                    keyPoints: ['拨乱反正', '真理标准', '思想解放', '实事求是', '理论准备'],
                    locations: ['北京', '全国各地'],
                    significance: '为改革开放提供了重要的思想准备和理论基础'
                },
                'first-cooperation': {
                    title: '第一次国共合作(1924-1927)',
                    subtitle: '统一战线的伟大实践',
                    content: `
                        <h4>合作背景</h4>
                        <p>1924年1月，中国国民党第一次全国代表大会在广州召开，标志着第一次国共合作的正式建立。这次合作是在共产国际的推动下，为了反对帝国主义和封建军阀而建立的革命统一战线。</p>

                        <h4>合作基础</h4>
                        <p>国共合作以孙中山的新三民主义为政治基础，中国共产党以个人身份加入国民党，帮助国民党改组，建立了"联俄、联共、扶助农工"的三大政策。</p>

                        <h4>重要成果</h4>
                        <p>在国共合作期间，创办了黄埔军校，培养了大批军事政治人才；发动了轰轰烈烈的国民革命运动，推动了北伐战争的胜利进军，基本推翻了北洋军阀的统治。</p>

                        <h4>历史意义</h4>
                        <p>第一次国共合作是中国共产党统一战线思想的重要实践，为中国革命积累了宝贵经验，证明了统一战线在中国革命中的重要作用。</p>
                    `,
                    keyPoints: ['统一战线', '黄埔军校', '北伐战争', '三大政策', '国民革命'],
                    locations: ['广州', '黄埔', '武汉', '南京'],
                    significance: '开创了中国共产党统一战线工作的先河，为中国革命积累了重要经验'
                },
                'socialist-construction': {
                    title: '社会主义建设探索(1956-1966)',
                    subtitle: '艰辛探索与宝贵经验',
                    content: `
                        <h4>探索背景</h4>
                        <p>1956年社会主义改造基本完成后，中国进入全面建设社会主义时期。党和人民开始探索适合中国国情的社会主义建设道路，这是一个充满艰辛但富有创造性的历史时期。</p>

                        <h4>重要探索</h4>
                        <p>毛泽东发表《论十大关系》，提出了探索中国社会主义建设道路的任务。党的八大正确分析了社会主义改造完成后中国社会的主要矛盾，为社会主义建设指明了方向。</p>

                        <h4>建设成就</h4>
                        <p>在这一时期，中国建立了独立的比较完整的工业体系和国民经济体系，成功研制出"两弹一星"，在科技、教育、文化等方面取得了重要进展。</p>

                        <h4>经验教训</h4>
                        <p>这一时期的探索既有成功的经验，也有深刻的教训。为后来的改革开放提供了重要的历史借鉴，丰富了社会主义建设的理论和实践。</p>
                    `,
                    keyPoints: ['十大关系', '党的八大', '工业体系', '两弹一星', '建设探索'],
                    locations: ['北京', '上海', '东北', '西北'],
                    significance: '为社会主义建设积累了重要经验，奠定了国家工业化基础'
                }
            };

            let content = contentMap[contentId];

            // 如果在主要内容映射中没找到，检查改革开放内容
            if (!content && reformOpeningContent[contentId]) {
                content = reformOpeningContent[contentId];
            }

            // 如果还没找到，检查新时代内容
            if (!content && newEraContent[contentId]) {
                content = newEraContent[contentId];
            }

            if (content) {
                showArticleModal(content);
                updateLearningProgress(contentId);
            } else {
                alert('该内容正在完善中，敬请期待！');
            }
        }

        // 改革开放内容
        const reformOpeningContent = {
            'reform-opening': {
                title: '改革开放启航(1978)',
                subtitle: '历史的伟大转折',
                content: `
                    <h4>历史背景</h4>
                    <p>1976年"文化大革命"结束后，中国面临着向何处去的重大历史关头。在邓小平等老一辈革命家的推动下，党和国家工作重心开始转移，为改革开放的启动创造了条件。</p>

                    <h4>十一届三中全会</h4>
                    <p>1978年12月18日至22日，中国共产党第十一届中央委员会第三次全体会议在北京召开。全会确立了解放思想、实事求是的思想路线，作出了把党和国家工作重心转移到经济建设上来、实行改革开放的历史性决策。</p>

                    <h4>理论创新</h4>
                    <p>全会重新确立了马克思主义的思想路线、政治路线和组织路线，开始形成以邓小平为核心的党的第二代中央领导集体，揭开了社会主义改革开放的序幕。</p>

                    <h4>历史意义</h4>
                    <p>十一届三中全会是新中国成立以来党的历史上具有深远意义的伟大转折，开启了改革开放和社会主义现代化建设新时期，中国从此走上了改革开放的康庄大道。</p>
                `,
                keyPoints: ['解放思想', '实事求是', '工作重心转移', '改革开放', '邓小平理论'],
                locations: ['北京', '深圳', '珠海', '汕头', '厦门'],
                significance: '开启了改革开放和社会主义现代化建设新时期'
            },
            'special-zones': {
                title: '经济特区建设(1980s)',
                subtitle: '改革开放的试验田',
                content: `
                    <h4>设立背景</h4>
                    <p>为了扩大对外开放，学习借鉴国外先进技术和管理经验，1980年，党中央、国务院决定在深圳、珠海、汕头、厦门设立经济特区，实行特殊的经济政策和灵活的经济措施。</p>

                    <h4>特区模式</h4>
                    <p>经济特区实行"特殊政策、灵活措施"，在计划经济体制下率先引入市场机制，成为改革开放的"试验田"和"窗口"。特区的成功实践为全国改革开放提供了宝贵经验。</p>

                    <h4>深圳奇迹</h4>
                    <p>深圳经济特区从一个边陲小镇发展成为现代化大都市，创造了举世瞩目的"深圳速度"，成为改革开放的重要标志和成功典型。</p>

                    <h4>理论贡献</h4>
                    <p>经济特区的成功实践丰富了社会主义市场经济理论，证明了社会主义制度与市场经济的有机结合，为中国特色社会主义道路的形成提供了重要支撑。</p>
                `,
                keyPoints: ['四个特区', '特殊政策', '深圳速度', '对外开放', '先行先试'],
                locations: ['深圳', '珠海', '汕头', '厦门'],
                significance: '为全国改革开放提供了宝贵经验和成功模式'
            },
            'market-economy': {
                title: '市场经济体制(1992)',
                subtitle: '社会主义市场经济的确立',
                content: `
                    <h4>南方谈话</h4>
                    <p>1992年初，邓小平视察南方并发表重要谈话，明确提出"社会主义也可以搞市场经济"，从根本上解除了把计划经济和市场经济看作属于社会基本制度范畴的思想束缚。</p>

                    <h4>十四大决策</h4>
                    <p>1992年10月，党的十四大明确提出建立社会主义市场经济体制的改革目标，确立了邓小平建设有中国特色社会主义理论在全党的指导地位。</p>

                    <h4>理论突破</h4>
                    <p>社会主义市场经济理论的提出，是对马克思主义政治经济学的重大发展，解决了社会主义与市场经济相结合的世界性难题，为中国经济发展注入了强大动力。</p>

                    <h4>实践成果</h4>
                    <p>社会主义市场经济体制的建立，极大地解放和发展了社会生产力，推动了中国经济的快速发展，为实现现代化奠定了坚实基础。</p>
                `,
                keyPoints: ['南方谈话', '十四大', '市场经济', '邓小平理论', '改革深化'],
                locations: ['深圳', '珠海', '上海', '北京'],
                significance: '确立了社会主义市场经济体制，为经济发展注入强大动力'
            },
            'wto-entry': {
                title: '加入WTO(2001)',
                subtitle: '融入经济全球化',
                content: `
                    <h4>历史背景</h4>
                    <p>经过15年的艰苦谈判，2001年12月11日，中国正式成为世界贸易组织第143个成员。这标志着中国对外开放进入了一个新阶段，中国经济与世界经济的联系更加紧密。</p>

                    <h4>入世意义</h4>
                    <p>加入WTO是中国深度参与经济全球化的重要标志，有利于扩大出口和利用外资，有利于推进经济体制改革和经济结构调整，有利于直接参与国际贸易规则的决策。</p>

                    <h4>挑战与机遇</h4>
                    <p>入世既带来了机遇，也带来了挑战。中国政府积极应对，深化改革开放，加强法制建设，提高经济竞争力，实现了经济的快速发展。</p>

                    <h4>理论发展</h4>
                    <p>入世实践丰富了对外开放理论，证明了中国可以在维护国家主权的前提下，积极参与经济全球化，实现互利共赢。</p>
                `,
                keyPoints: ['WTO成员', '经济全球化', '对外开放', '贸易规则', '互利共赢'],
                locations: ['北京', '上海', '广州', '深圳'],
                significance: '标志着中国对外开放进入新阶段，深度融入经济全球化'
            },
            'reform-achievements': {
                title: '改革开放成就',
                subtitle: '中国奇迹的创造',
                content: `
                    <h4>经济成就</h4>
                    <p>改革开放以来，中国经济保持了长期快速增长，GDP从1978年的3679亿元增长到2012年的54万亿元，经济总量跃居世界第二位，创造了举世瞩目的"中国奇迹"。</p>

                    <h4>社会进步</h4>
                    <p>人民生活水平显著提高，从温饱不足到总体小康，再到全面建成小康社会，中国人民的获得感、幸福感、安全感不断增强。</p>

                    <h4>制度完善</h4>
                    <p>社会主义市场经济体制不断完善，形成了公有制为主体、多种所有制经济共同发展的基本经济制度，建立了比较完善的社会主义法律体系。</p>

                    <h4>理论贡献</h4>
                    <p>改革开放的伟大实践形成了邓小平理论、"三个代表"重要思想、科学发展观等重大理论成果，丰富和发展了中国特色社会主义理论体系。</p>
                `,
                keyPoints: ['经济奇迹', '世界第二', '小康社会', '制度完善', '理论创新'],
                locations: ['全国各地', '东部沿海', '中西部地区', '城乡各地'],
                significance: '创造了人类发展史上的奇迹，为世界发展贡献了中国智慧'
            },
            'deng-theory': {
                title: '邓小平理论形成(1978-1997)',
                subtitle: '中国特色社会主义理论体系的开篇之作',
                content: `
                    <h4>理论形成</h4>
                    <p>邓小平理论是在和平与发展成为时代主题的历史条件下，在我国改革开放和现代化建设的实践中，在总结我国社会主义胜利和挫折的历史经验并借鉴其他社会主义国家兴衰成败历史经验的基础上，逐步形成和发展起来的。</p>

                    <h4>核心内容</h4>
                    <p>邓小平理论围绕"什么是社会主义、怎样建设社会主义"这个根本问题，系统回答了中国这样的经济文化比较落后的国家如何建设社会主义、如何巩固和发展社会主义的一系列基本问题。</p>

                    <h4>重要贡献</h4>
                    <p>提出了社会主义本质论、社会主义初级阶段理论、改革开放理论、社会主义市场经济理论等重要思想，为中国特色社会主义道路的开辟提供了理论指导。</p>

                    <h4>历史地位</h4>
                    <p>邓小平理论是马克思列宁主义的基本原理同当代中国实践和时代特征相结合的产物，是毛泽东思想在新的历史条件下的继承和发展，是马克思主义在中国发展的新阶段。</p>
                `,
                keyPoints: ['社会主义本质', '初级阶段', '改革开放', '市场经济', '中国特色'],
                locations: ['北京', '深圳', '上海', '全国各地'],
                significance: '开辟了中国特色社会主义道路，指导改革开放取得伟大成就'
            },
            'three-represents': {
                title: '"三个代表"重要思想(1997-2002)',
                subtitle: '新世纪党的建设和发展的重要指导思想',
                content: `
                    <h4>思想内涵</h4>
                    <p>"三个代表"重要思想的核心内容是：中国共产党始终代表中国先进生产力的发展要求，始终代表中国先进文化的前进方向，始终代表中国最广大人民的根本利益。</p>

                    <h4>时代背景</h4>
                    <p>进入新世纪，世界多极化和经济全球化趋势深入发展，科技进步日新月异，综合国力竞争日趋激烈。在这样的历史条件下，"三个代表"重要思想应运而生。</p>

                    <h4>实践意义</h4>
                    <p>"三个代表"重要思想指导我们党在新的历史条件下实现了理论创新和实践创新，推动了改革开放和现代化建设事业的发展，加强了党的建设新的伟大工程。</p>

                    <h4>理论贡献</h4>
                    <p>深化了对共产党执政规律、社会主义建设规律、人类社会发展规律的认识，是对马克思列宁主义、毛泽东思想、邓小平理论的继承和发展。</p>
                `,
                keyPoints: ['先进生产力', '先进文化', '人民利益', '与时俱进', '执政规律'],
                locations: ['北京', '江苏', '广东', '全国各地'],
                significance: '指导党在新世纪新阶段推进中国特色社会主义伟大事业'
            }
        };

        // 新时代内容
        const newEraContent = {
            'new-era': {
                title: '新时代开启(2012-至今)',
                subtitle: '中国特色社会主义进入新时代',
                content: `
                    <h4>时代背景</h4>
                    <p>党的十八大以来，以习近平同志为核心的党中央，以巨大的政治勇气和强烈的责任担当，提出一系列新理念新思想新战略，出台一系列重大方针政策，推出一系列重大举措，推进一系列重大工作。</p>

                    <h4>新思想指引</h4>
                    <p>习近平新时代中国特色社会主义思想，是马克思主义中国化最新成果，是党和人民实践经验和集体智慧的结晶，是中国特色社会主义理论体系的重要组成部分，是全党全国人民为实现中华民族伟大复兴而奋斗的行动指南。</p>

                    <h4>历史性成就</h4>
                    <p>新时代十年来，我们经历了对党和人民事业具有重大现实意义和深远历史意义的三件大事：迎来中国共产党成立一百周年，中国特色社会主义进入新时代，完成脱贫攻坚、全面建成小康社会的历史任务。</p>

                    <h4>理论贡献</h4>
                    <p>新时代的伟大实践推动了马克思主义中国化时代化的新飞跃，形成了习近平新时代中国特色社会主义思想，为新时代党和国家事业发展提供了根本遵循。</p>
                `,
                keyPoints: ['新思想', '新时代', '新征程', '伟大复兴', '历史性成就'],
                locations: ['北京', '雄安', '粤港澳大湾区', '长江经济带'],
                significance: '开启了全面建设社会主义现代化国家新征程'
            },
            'great-rejuvenation': {
                title: '中华民族伟大复兴',
                subtitle: '中国梦的时代内涵',
                content: `
                    <h4>中国梦的提出</h4>
                    <p>2012年11月29日，习近平总书记在参观《复兴之路》展览时首次提出"中国梦"。中国梦就是实现中华民族伟大复兴，这是近代以来中华民族最伟大的梦想。</p>

                    <h4>两个一百年</h4>
                    <p>实现中华民族伟大复兴的中国梦，就是要实现国家富强、民族振兴、人民幸福。这个梦想，凝聚了几代中国人的夙愿，体现了中华民族和中国人民的整体利益。</p>

                    <h4>奋斗目标</h4>
                    <p>到建党一百年时全面建成小康社会，到新中国成立一百年时建成富强民主文明和谐美丽的社会主义现代化强国。这是新时代中国特色社会主义发展的战略安排。</p>

                    <h4>理论意义</h4>
                    <p>中国梦的提出，深刻阐释了中华民族伟大复兴的历史必然性，明确了当代中国发展进步的根本方向，凝聚了全党全国各族人民的共同意志。</p>
                `,
                keyPoints: ['中国梦', '伟大复兴', '两个一百年', '三个必须', '历史必然'],
                locations: ['天安门广场', '人民大会堂', '中华民族复兴路'],
                significance: '为实现中华民族伟大复兴指明了前进方向和奋斗目标'
            },
            'party-building': {
                title: '全面从严治党',
                subtitle: '党的建设新的伟大工程',
                content: `
                    <h4>战略部署</h4>
                    <p>党的十八大以来，以习近平同志为核心的党中央把全面从严治党纳入"四个全面"战略布局，以前所未有的勇气和定力推进党风廉政建设和反腐败斗争。</p>

                    <h4>制度建设</h4>
                    <p>坚持思想建党和制度治党同向发力，先后制定修订了《关于新形势下党内政治生活的若干准则》《中国共产党党内监督条例》等一系列党内法规。</p>

                    <h4>反腐成果</h4>
                    <p>坚持"老虎""苍蝇"一起打，反腐败斗争取得压倒性胜利并全面巩固，党内政治生态发生根本性变化，党的创造力、凝聚力、战斗力显著增强。</p>

                    <h4>理论创新</h4>
                    <p>形成了习近平总书记关于党的建设的重要思想，丰富和发展了马克思主义建党学说，为新时代党的建设提供了根本遵循。</p>
                `,
                keyPoints: ['四个全面', '从严治党', '制度治党', '反腐败', '政治生态'],
                locations: ['中南海', '人民大会堂', '各级党组织'],
                significance: '确保党始终成为中国特色社会主义事业的坚强领导核心'
            },
            'poverty-alleviation': {
                title: '脱贫攻坚战',
                subtitle: '人类减贫史上的奇迹',
                content: `
                    <h4>历史任务</h4>
                    <p>党的十八大以来，以习近平同志为核心的党中央把脱贫攻坚摆在治国理政的突出位置，组织开展了声势浩大的脱贫攻坚人民战争。</p>

                    <h4>精准方略</h4>
                    <p>坚持精准扶贫精准脱贫基本方略，做到扶持对象精准、项目安排精准、资金使用精准、措施到户精准、因村派人精准、脱贫成效精准。</p>

                    <h4>伟大成就</h4>
                    <p>经过8年持续奋斗，现行标准下9899万农村贫困人口全部脱贫，832个贫困县全部摘帽，12.8万个贫困村全部出列，完成了消除绝对贫困的艰巨任务。</p>

                    <h4>世界意义</h4>
                    <p>中国脱贫攻坚战取得全面胜利，创造了又一个彪炳史册的人间奇迹，为全球减贫事业作出了重大贡献，提供了中国智慧和中国方案。</p>
                `,
                keyPoints: ['精准扶贫', '全面脱贫', '小康社会', '人间奇迹', '中国方案'],
                locations: ['贫困地区', '革命老区', '民族地区', '边疆地区'],
                significance: '历史性地解决了绝对贫困问题，为全面建成小康社会奠定了坚实基础'
            },
            'modernization': {
                title: '社会主义现代化强国',
                subtitle: '全面建设社会主义现代化国家',
                content: `
                    <h4>战略安排</h4>
                    <p>党的十九大对实现第二个百年奋斗目标作出分两个阶段推进的战略安排：从2020年到2035年基本实现社会主义现代化；从2035年到本世纪中叶把我国建成富强民主文明和谐美丽的社会主义现代化强国。</p>

                    <h4>现代化内涵</h4>
                    <p>中国式现代化是人口规模巨大的现代化，是全体人民共同富裕的现代化，是物质文明和精神文明相协调的现代化，是人与自然和谐共生的现代化，是走和平发展道路的现代化。</p>

                    <h4>发展理念</h4>
                    <p>坚持创新、协调、绿色、开放、共享的新发展理念，构建新发展格局，推动高质量发展，统筹推进经济建设、政治建设、文化建设、社会建设、生态文明建设。</p>

                    <h4>理论贡献</h4>
                    <p>中国式现代化理论，是我们党领导全国各族人民在长期探索和实践中历经千辛万苦、付出巨大代价取得的重大理论创新成果，是科学社会主义的最新重大成果。</p>
                `,
                keyPoints: ['现代化强国', '两步走', '中国式现代化', '新发展理念', '高质量发展'],
                locations: ['全国各地', '城市乡村', '各行各业'],
                significance: '开辟了人类现代化新道路，创造了人类文明新形态'
            },
            'belt-road-initiative': {
                title: '"一带一路"倡议(2013-至今)',
                subtitle: '构建人类命运共同体的重要实践',
                content: `
                    <h4>倡议提出</h4>
                    <p>2013年，习近平主席先后提出建设"丝绸之路经济带"和"21世纪海上丝绸之路"的重大倡议，简称"一带一路"倡议。这是新时代中国扩大对外开放的重大战略举措。</p>

                    <h4>核心理念</h4>
                    <p>"一带一路"倡议秉承共商共建共享原则，以政策沟通、设施联通、贸易畅通、资金融通、民心相通为主要内容，致力于构建人类命运共同体。</p>

                    <h4>建设成果</h4>
                    <p>截至目前，已有140多个国家和30多个国际组织签署"一带一路"合作文件，一大批重大项目落地实施，为各国发展和民生改善作出了重要贡献。</p>

                    <h4>世界意义</h4>
                    <p>"一带一路"倡议为全球治理体系改革和建设贡献了中国智慧、中国方案，体现了中国作为负责任大国的担当，推动构建新型国际关系。</p>
                `,
                keyPoints: ['共商共建共享', '五通建设', '命运共同体', '全球治理', '中国方案'],
                locations: ['亚洲', '欧洲', '非洲', '拉美', '大洋洲'],
                significance: '为全球发展合作提供了新平台，推动构建人类命运共同体'
            },
            'covid-response': {
                title: '抗击新冠疫情(2020-2022)',
                subtitle: '人民至上、生命至上的伟大抗疫精神',
                content: `
                    <h4>疫情应对</h4>
                    <p>面对突如其来的新冠肺炎疫情，以习近平同志为核心的党中央坚持人民至上、生命至上，统筹疫情防控和经济社会发展，最大限度保护了人民生命安全和身体健康。</p>

                    <h4>抗疫精神</h4>
                    <p>在抗疫斗争中，中国人民和中华民族铸就了生命至上、举国同心、舍生忘死、尊重科学、命运与共的伟大抗疫精神，丰富了民族精神和时代精神的内涵。</p>

                    <h4>制度优势</h4>
                    <p>抗疫斗争充分彰显了中国共产党领导和我国社会主义制度的显著优势，充分展现了中国人民和中华民族的伟大力量，充分体现了中华文明的深厚底蕴。</p>

                    <h4>国际贡献</h4>
                    <p>中国积极开展国际抗疫合作，向世界提供疫苗、医疗物资等援助，体现了负责任大国担当，为全球抗疫贡献了中国力量。</p>
                `,
                keyPoints: ['人民至上', '生命至上', '抗疫精神', '制度优势', '国际合作'],
                locations: ['武汉', '北京', '上海', '全国各地'],
                significance: '彰显了中国制度优势和中华民族伟大精神，为全球抗疫作出重要贡献'
            },
            'ecological-civilization': {
                title: '生态文明建设',
                subtitle: '绿水青山就是金山银山',
                content: `
                    <h4>理念创新</h4>
                    <p>习近平总书记提出"绿水青山就是金山银山"的重要理念，强调生态文明建设是关系中华民族永续发展的根本大计，要像保护眼睛一样保护生态环境。</p>

                    <h4>制度建设</h4>
                    <p>建立健全生态文明制度体系，实行最严格的生态环境保护制度，设立国家公园体制，推进生态环境治理体系和治理能力现代化。</p>

                    <h4>建设成果</h4>
                    <p>污染防治攻坚战取得重大成效，生态环境质量明显改善，美丽中国建设迈出重大步伐，为全球环境治理贡献了中国智慧和中国力量。</p>

                    <h4>全球意义</h4>
                    <p>中国积极参与全球环境治理，推动《巴黎协定》达成和生效，提出碳达峰碳中和目标，为应对气候变化、推动全球可持续发展作出重要贡献。</p>
                `,
                keyPoints: ['绿水青山', '生态文明', '制度体系', '美丽中国', '全球治理'],
                locations: ['长江流域', '黄河流域', '京津冀', '长三角'],
                significance: '推动形成人与自然和谐发展现代化建设新格局'
            },
            'common-prosperity': {
                title: '共同富裕示范区建设',
                subtitle: '扎实推动共同富裕，实现全体人民共同富裕',
                content: `
                    <h4>战略意义</h4>
                    <p>共同富裕是社会主义的本质要求，是中国式现代化的重要特征。习近平总书记强调，共同富裕是全体人民的富裕，是人民群众物质生活和精神生活都富裕，不是少数人的富裕，也不是整齐划一的平均主义。</p>

                    <h4>浙江示范</h4>
                    <p>2021年，党中央支持浙江高质量发展建设共同富裕示范区，为全国推动共同富裕提供省域范例。浙江要在推动共同富裕方面先行示范，为全国推动共同富裕提供经验。</p>

                    <h4>实现路径</h4>
                    <p>坚持以人民为中心的发展思想，在高质量发展中促进共同富裕，正确处理效率和公平的关系，构建初次分配、再分配、三次分配协调配套的基础性制度安排。</p>

                    <h4>目标愿景</h4>
                    <p>到2035年，全体人民共同富裕取得更为明显的实质性进展，基本公共服务实现均等化，城乡区域发展差距和居民生活水平差距显著缩小。</p>
                `,
                keyPoints: ['共同富裕', '浙江示范', '三次分配', '实质性进展', '全体人民'],
                locations: ['浙江省', '长三角', '全国各地'],
                significance: '为实现全体人民共同富裕提供了实践路径和制度保障'
            },
            'digital-china': {
                title: '数字中国建设',
                subtitle: '数字化转型，建设网络强国、数字中国',
                content: `
                    <h4>战略布局</h4>
                    <p>数字中国建设是新时代国家信息化发展的新战略，是推动经济社会高质量发展的重要引擎。要统筹推进数字经济、数字政务、数字社会、数字生态文明建设。</p>

                    <h4>核心技术</h4>
                    <p>加强关键核心技术攻关，推动人工智能、大数据、云计算、区块链等新一代信息技术与实体经济深度融合，培育新动能，发展新业态。</p>

                    <h4>数字治理</h4>
                    <p>推进数字政府建设，提升政府数字化履职能力，构建数字化、智能化的政府运行新形态，为人民群众提供更加便民利民的数字化服务。</p>

                    <h4>发展成就</h4>
                    <p>我国数字经济规模连续多年位居世界第二，数字基础设施建设全球领先，5G网络、光纤网络、移动支付等领域走在世界前列，为经济社会发展注入强劲动力。</p>
                `,
                keyPoints: ['数字经济', '核心技术', '数字政府', '基础设施', '网络强国'],
                locations: ['北京', '深圳', '杭州', '上海', '全国各地'],
                significance: '推动经济社会数字化转型，建设网络强国和数字中国'
            }
        };

        // 显示文章模态框
        function showArticleModal(content) {
            // 创建模态框HTML
            const modalHtml = `
                <div class="modal fade" id="articleModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content article-modal">
                            <div class="modal-header bg-danger text-white">
                                <div>
                                    <h4 class="modal-title mb-1">${content.title}</h4>
                                    <p class="mb-0 opacity-75">${content.subtitle}</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body article-content">
                                ${content.content}

                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <h6><i class="fas fa-key text-danger me-2"></i>关键要点</h6>
                                            <ul class="key-points">
                                                ${content.keyPoints.map(point => `<li>${point}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <h6><i class="fas fa-map-marker-alt text-danger me-2"></i>重要地点</h6>
                                            <ul class="locations">
                                                ${content.locations.map(loc => `<li>${loc}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="significance-box mt-4">
                                    <h6><i class="fas fa-star text-warning me-2"></i>历史意义</h6>
                                    <p class="mb-0">${content.significance}</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>关闭
                                </button>
                                <button type="button" class="btn btn-danger" onclick="markAsCompleted('${content.title}')">
                                    <i class="fas fa-check me-2"></i>标记为已学习
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 移除已存在的模态框
            const existingModal = document.getElementById('articleModal');
            if (existingModal) {
                existingModal.remove();
            }

            // 添加新模态框到页面
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('articleModal'));
            modal.show();
        }

        // 标记为已完成
        function markAsCompleted(title) {
            alert(`已将"${title}"标记为已学习！\n\n您的学习进度已更新。`);
            const modal = bootstrap.Modal.getInstance(document.getElementById('articleModal'));
            modal.hide();
        }

        // 更新学习进度
        function updateLearningProgress(contentId) {
            let completedLessons = JSON.parse(localStorage.getItem('completedLessons') || '[]');
            if (!completedLessons.includes(contentId)) {
                completedLessons.push(contentId);
                localStorage.setItem('completedLessons', JSON.stringify(completedLessons));
            }
        }

        // 党支部活动报道功能
        function openArticleManager() {
            // 检查管理员权限
            const adminSession = JSON.parse(localStorage.getItem('adminSession') || 'null');
            if (!adminSession || !adminSession.isAdmin) {
                alert('此功能需要管理员权限，请先登录管理后台。');
                return;
            }

            const action = confirm('文章管理功能\n\n确定：发布新文章\n取消：管理现有文章');
            if (action) {
                publishNewArticle();
            } else {
                manageExistingArticles();
            }
        }

        function publishNewArticle() {
            const title = prompt('请输入文章标题：');
            if (!title) return;

            const content = prompt('请输入文章内容：');
            if (!content) return;

            const author = prompt('请输入作者：', '党支部宣传委员');
            if (!author) return;

            // 保存文章
            const articles = JSON.parse(localStorage.getItem('partyArticles') || '[]');
            const newArticle = {
                id: Date.now(),
                title: title,
                content: content,
                author: author,
                publishDate: new Date().toISOString().split('T')[0],
                views: 0
            };

            articles.unshift(newArticle);
            localStorage.setItem('partyArticles', JSON.stringify(articles));

            alert('文章发布成功！');
            location.reload(); // 刷新页面显示新文章
        }

        function readArticle(articleId) {
            const articleMap = {
                'article1': {
                    title: '自动化学院物联网党支部开展"学习二十大精神"主题党日活动',
                    subtitle: '深入学习贯彻党的二十大精神',
                    content: `
                        <h4>活动背景</h4>
                        <p>为深入学习贯彻党的二十大精神，进一步提高党员的政治理论水平和思想觉悟，12月10日下午，自动化学院物联网党支部在学院会议室组织全体党员开展"学习二十大精神"主题党日活动。</p>

                        <h4>活动内容</h4>
                        <p>活动中，党支部书记带领大家重温了党的二十大报告的重要内容，特别是关于教育、科技、人才的重要论述。与会党员认真学习了习近平总书记关于"实施科教兴国战略，强化现代化建设人才支撑"的重要指示精神。</p>

                        <h4>深入讨论</h4>
                        <p>党员们结合自身专业特点，就如何在物联网技术发展中贯彻新发展理念进行了深入讨论。大家一致认为，要将个人专业发展与国家战略需求紧密结合，在推动科技创新中发挥党员先锋模范作用。</p>

                        <h4>活动成效</h4>
                        <p>此次活动进一步增强了党员的政治意识和责任担当，大家纷纷表示要在学习和工作中发挥先锋模范作用，为建设教育强国、科技强国贡献青春力量。</p>
                    `,
                    author: '党支部宣传委员',
                    date: '2024-12-10',
                    participants: '全体党员25人',
                    location: '学院会议室',
                    tags: ['党日活动', '二十大精神', '理论学习']
                },
                'article2': {
                    title: '"心语同行"心理健康服务志愿活动圆满结束',
                    subtitle: '党员志愿者用心服务师生',
                    content: `
                        <h4>活动概况</h4>
                        <p>12月8日，物联网党支部组织党员志愿者在学生活动中心开展"心语同行"心理健康服务活动，为同学们提供心理咨询和情感支持，充分体现了党员的奉献精神和专业素养。</p>

                        <h4>服务内容</h4>
                        <p>活动现场设置了心理测评区、咨询交流区和放松体验区三个功能区域。党员志愿者们运用专业知识，为前来咨询的同学提供了耐心细致的服务，包括心理健康评估、情感疏导、学习压力缓解等。</p>

                        <h4>活动成果</h4>
                        <p>活动共服务学生120余人次，发放心理健康宣传资料200余份，现场解答心理健康问题50余个。许多同学表示通过活动获得了实用的心理调节方法，对缓解学习压力很有帮助。</p>

                        <h4>社会反响</h4>
                        <p>通过此次活动，不仅帮助同学们缓解了学习压力，也展现了党员的奉献精神和专业素养，得到了师生的一致好评，进一步提升了党支部的影响力和凝聚力。</p>
                    `,
                    author: '志愿服务队',
                    date: '2024-12-08',
                    participants: '党员志愿者15人',
                    location: '学生活动中心',
                    tags: ['志愿服务', '心理健康', '党员先锋']
                }
            };

            const article = articleMap[articleId];
            if (article) {
                showPartyArticleModal(article);
            }
        }

        // 显示党支部活动报道模态框
        function showPartyArticleModal(article) {
            const modalHtml = `
                <div class="modal fade" id="partyArticleModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content article-modal">
                            <div class="modal-header bg-danger text-white">
                                <div>
                                    <h4 class="modal-title mb-1">${article.title}</h4>
                                    <p class="mb-0 opacity-75">${article.subtitle}</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body article-content">
                                ${article.content}

                                <div class="row mt-4">
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <h6><i class="fas fa-users text-danger me-2"></i>参与人员</h6>
                                            <p class="mb-0">${article.participants}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <h6><i class="fas fa-map-marker-alt text-danger me-2"></i>活动地点</h6>
                                            <p class="mb-0">${article.location}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <h6><i class="fas fa-calendar text-danger me-2"></i>活动时间</h6>
                                            <p class="mb-0">${article.date}</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-12">
                                        <div class="info-box">
                                            <h6><i class="fas fa-tags text-danger me-2"></i>活动标签</h6>
                                            <div class="d-flex flex-wrap gap-2">
                                                ${article.tags.map(tag => `<span class="badge bg-danger">${tag}</span>`).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="significance-box mt-4">
                                    <h6><i class="fas fa-pen text-warning me-2"></i>报道作者</h6>
                                    <p class="mb-0">${article.author}</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>关闭
                                </button>
                                <button type="button" class="btn btn-danger" onclick="shareArticle('${article.title}')">
                                    <i class="fas fa-share me-2"></i>分享文章
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 移除已存在的模态框
            const existingModal = document.getElementById('partyArticleModal');
            if (existingModal) {
                existingModal.remove();
            }

            // 添加新模态框到页面
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('partyArticleModal'));
            modal.show();
        }

        // 分享文章
        function shareArticle(title) {
            alert(`分享功能\n\n文章"${title}"已复制到剪贴板，您可以分享给其他同学！`);
            const modal = bootstrap.Modal.getInstance(document.getElementById('partyArticleModal'));
            modal.hide();
        }

        function viewMoreArticles() {
            alert('更多党支部活动报道\n\n• 物联网技术助力智慧校园建设实践活动\n• 党员志愿者参与社区科普宣传活动\n• "科技创新·青春担当"主题团日活动\n• 学习习近平总书记重要讲话精神座谈会\n• 党支部与企业党组织结对共建活动\n\n点击具体文章可查看详细内容...');
        }

        // 红色教育地图功能
        function showRedSites(region) {
            // 更新按钮状态
            document.querySelectorAll('.btn-group button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const siteMap = {
                'guangdong': [
                    { name: '黄埔军校旧址', location: '广州市黄埔区', type: '5A级景区', id: 'huangpu' },
                    { name: '广州起义纪念馆', location: '广州市越秀区', type: '革命历史', id: 'guangzhou-uprising' },
                    { name: '海陆丰革命根据地', location: '汕尾市海丰县', type: '革命根据地', id: 'hailufeng' },
                    { name: '叶剑英纪念园', location: '梅州市梅县区', type: '名人故居', id: 'yejianying' }
                ],
                'national': [
                    { name: '中共一大会址', location: '上海市黄浦区', type: '革命圣地', id: 'yida' },
                    { name: '井冈山革命根据地', location: '江西省吉安市', type: '革命根据地', id: 'jinggangshan' },
                    { name: '延安革命纪念馆', location: '陕西省延安市', type: '革命圣地', id: 'yanan' },
                    { name: '西柏坡纪念馆', location: '河北省石家庄市', type: '革命圣地', id: 'xibaipo' }
                ],
                'nearby': [
                    { name: '广东工业大学校史馆', location: '校内', type: '校史教育', id: 'gdut-history' },
                    { name: '广州博物馆', location: '越秀区', type: '历史文化', id: 'gz-museum' },
                    { name: '中山纪念堂', location: '越秀区', type: '纪念建筑', id: 'zhongshan-hall' }
                ]
            };

            const sites = siteMap[region] || siteMap['guangdong'];
            let html = '';

            sites.forEach(site => {
                html += `
                    <div class="red-site-item mb-2 p-2 border rounded">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">${site.name}</h6>
                                <small class="text-muted">
                                    <i class="fas fa-map-marker-alt me-1"></i>${site.location}
                                    <i class="fas fa-star ms-2 me-1"></i>${site.type}
                                </small>
                            </div>
                            <button class="btn btn-sm btn-outline-primary" onclick="viewSiteDetail('${site.id}')">详情</button>
                        </div>
                    </div>
                `;
            });

            document.getElementById('redSitesList').innerHTML = html;
        }

        function viewSiteDetail(siteId) {
            const siteDetails = {
                'huangpu': {
                    title: '黄埔军校旧址',
                    subtitle: '近代中国军事教育的摇篮',
                    content: `
                        <h4>历史背景</h4>
                        <p>中国国民党陆军军官学校，简称黄埔军校，是1924年由孙中山先生在中国共产党和苏联的帮助下创办的一所新型军事学校。学校以"创造革命军，来挽救中国的危亡"为宗旨，培养了大批军事政治人才。</p>

                        <h4>重要人物</h4>
                        <p>黄埔军校汇聚了当时中国最优秀的军事和政治人才。周恩来、叶剑英、聂荣臻等中国共产党人曾在此担任教官或政治工作，为学校的发展和学员的培养作出了重要贡献。</p>

                        <h4>历史意义</h4>
                        <p>黄埔军校是第一次国共合作的重要成果，为北伐战争和抗日战争培养了大批军事指挥人才。许多黄埔学员后来成为抗日战争和解放战争中的重要将领，为中华民族的解放事业作出了重大贡献。</p>

                        <h4>现状保护</h4>
                        <p>黄埔军校旧址现为全国重点文物保护单位和爱国主义教育基地，完整保存了当年的校舍、教室、宿舍等建筑，是了解中国近代军事教育和革命历史的重要场所。</p>
                    `,
                    keyPoints: ['军事教育', '国共合作', '革命摇篮', '爱国主义教育'],
                    locations: ['广州市黄埔区长洲岛', '珠江口'],
                    significance: '培养了大批革命军事人才，为中国革命和建设事业作出了重要贡献',
                    visiting: '开放时间：9:00-17:00，免费参观，需预约',
                    transportation: '地铁4号线大学城南站转公交'
                },
                'guangzhou-uprising': {
                    title: '广州起义纪念馆',
                    subtitle: '英勇反击的革命壮举',
                    content: `
                        <h4>起义背景</h4>
                        <p>1927年12月11日，中国共产党在广州发动武装起义，这是继南昌起义、秋收起义之后，中国共产党领导的又一次重要武装起义。起义的目的是反对国民党反动派的屠杀政策，建立工农民主政权。</p>

                        <h4>起义过程</h4>
                        <p>起义由张太雷、叶挺、叶剑英等领导，参加起义的有工人赤卫队、农民自卫军、革命士兵和革命群众5.7万多人。起义军一度占领了广州大部分地区，建立了广州苏维埃政府。</p>

                        <h4>英勇牺牲</h4>
                        <p>由于敌我力量悬殊，起义最终失败。张太雷等5700多名共产党员和革命群众英勇牺牲，用鲜血和生命谱写了可歌可泣的英雄壮歌。</p>

                        <h4>历史意义</h4>
                        <p>广州起义虽然失败了，但它和南昌起义、秋收起义一起，标志着中国共产党独立领导革命战争、创建人民军队和武装夺取政权的开始，在中国革命史上具有重要地位。</p>
                    `,
                    keyPoints: ['武装起义', '苏维埃政府', '革命牺牲', '历史意义'],
                    locations: ['广州市越秀区起义路', '广州起义烈士陵园'],
                    significance: '标志着中国共产党独立领导武装斗争的重要开端',
                    visiting: '开放时间：9:00-17:00，周一闭馆，免费参观',
                    transportation: '地铁1号线烈士陵园站'
                },
                'hailufeng': {
                    title: '海陆丰革命根据地',
                    subtitle: '中国第一个苏维埃政权',
                    content: `
                        <h4>根据地建立</h4>
                        <p>1927年11月，在彭湃的领导下，海陆丰地区建立了中国第一个县级苏维埃政权——海丰县苏维埃政府和陆丰县苏维埃政府，这是中国共产党领导建立的第一个红色政权。</p>

                        <h4>彭湃其人</h4>
                        <p>彭湃被誉为"中国农民运动大王"，他出身地主家庭却投身革命，烧毁自家田契，组织农民协会，领导农民运动，是中国共产党早期农民运动的杰出领袖。</p>

                        <h4>革命实践</h4>
                        <p>海陆丰苏维埃政府实行了一系列革命措施：没收地主土地分给农民，建立工农武装，发展生产，兴办教育，为后来各革命根据地的建设提供了宝贵经验。</p>

                        <h4>历史地位</h4>
                        <p>海陆丰革命根据地的建立，开创了中国共产党领导的工农民主政权的先河，为中国革命道路的探索提供了重要经验，在中国革命史上具有重要的开创性意义。</p>
                    `,
                    keyPoints: ['第一个苏维埃', '彭湃领导', '农民运动', '土地革命'],
                    locations: ['汕尾市海丰县', '陆丰市'],
                    significance: '开创了中国共产党领导的红色政权建设的先河',
                    visiting: '开放时间：8:30-17:30，免费参观',
                    transportation: '汕尾高铁站转公交'
                }
            };

            const site = siteDetails[siteId];
            if (site) {
                showRedSiteModal(site);
            } else {
                alert('正在加载景点详细信息...\n\n该景点的详细介绍、历史背景、参观指南等信息即将为您呈现。');
            }
        }

        // 显示红色教育基地详情模态框
        function showRedSiteModal(site) {
            const modalHtml = `
                <div class="modal fade" id="redSiteModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content article-modal">
                            <div class="modal-header bg-danger text-white">
                                <div>
                                    <h4 class="modal-title mb-1">${site.title}</h4>
                                    <p class="mb-0 opacity-75">${site.subtitle}</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body article-content">
                                ${site.content}

                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <h6><i class="fas fa-key text-danger me-2"></i>关键要点</h6>
                                            <ul class="key-points">
                                                ${site.keyPoints.map(point => `<li>${point}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <h6><i class="fas fa-map-marker-alt text-danger me-2"></i>地理位置</h6>
                                            <ul class="locations">
                                                ${site.locations.map(loc => `<li>${loc}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="significance-box mt-4">
                                    <h6><i class="fas fa-star text-warning me-2"></i>历史意义</h6>
                                    <p class="mb-0">${site.significance}</p>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="visit-info-box">
                                            <h6><i class="fas fa-clock text-info me-2"></i>参观信息</h6>
                                            <p class="mb-0">${site.visiting}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="visit-info-box">
                                            <h6><i class="fas fa-route text-info me-2"></i>交通指南</h6>
                                            <p class="mb-0">${site.transportation}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>关闭
                                </button>
                                <button type="button" class="btn btn-danger" onclick="addToVisitPlan('${site.title}')">
                                    <i class="fas fa-plus me-2"></i>加入参观计划
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 移除已存在的模态框
            const existingModal = document.getElementById('redSiteModal');
            if (existingModal) {
                existingModal.remove();
            }

            // 添加新模态框到页面
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('redSiteModal'));
            modal.show();
        }

        // 加入参观计划
        function addToVisitPlan(siteName) {
            alert(`已将"${siteName}"加入您的参观计划！\n\n您可以在个人中心查看完整的参观计划。`);
            const modal = bootstrap.Modal.getInstance(document.getElementById('redSiteModal'));
            modal.hide();
        }

        // 管理员添加新内容
        function addNewContent(category) {
            // 检查管理员权限
            const adminSession = JSON.parse(localStorage.getItem('adminSession') || 'null');
            if (!adminSession || !adminSession.isAdmin) {
                alert('此功能需要管理员权限，请先登录管理后台。');
                return;
            }

            showAddContentModal(category);
        }

        // 显示添加内容模态框
        function showAddContentModal(category) {
            const categoryNames = {
                'party-founding': '建党历程',
                'reform-opening': '改革开放',
                'new-era': '新时代'
            };

            const modalHtml = `
                <div class="modal fade" id="addContentModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content article-modal">
                            <div class="modal-header bg-danger text-white">
                                <h4 class="modal-title">添加${categoryNames[category]}内容</h4>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="addContentForm">
                                    <input type="hidden" id="contentCategory" value="${category}">

                                    <div class="mb-3">
                                        <label for="contentId" class="form-label">内容ID *</label>
                                        <input type="text" class="form-control" id="contentId" placeholder="例如：new-topic-1" required>
                                        <div class="form-text">用于系统识别，建议使用英文和数字</div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="contentTitle" class="form-label">标题 *</label>
                                        <input type="text" class="form-control" id="contentTitle" placeholder="例如：社会主义建设探索(1956-1966)" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="contentSubtitle" class="form-label">副标题 *</label>
                                        <input type="text" class="form-control" id="contentSubtitle" placeholder="例如：艰辛探索与宝贵经验" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="contentBody" class="form-label">正文内容 *</label>
                                        <textarea class="form-control" id="contentBody" rows="8" placeholder="请输入详细的文章内容，支持HTML格式..." required></textarea>
                                        <div class="form-text">可以使用HTML标签如 &lt;h4&gt;、&lt;p&gt; 等来格式化内容</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="keyPoints" class="form-label">关键要点</label>
                                                <textarea class="form-control" id="keyPoints" rows="3" placeholder="每行一个要点，例如：&#10;社会主义建设&#10;探索实践&#10;宝贵经验"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="locations" class="form-label">重要地点</label>
                                                <textarea class="form-control" id="locations" rows="3" placeholder="每行一个地点，例如：&#10;北京&#10;上海&#10;全国各地"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="significance" class="form-label">历史意义 *</label>
                                        <textarea class="form-control" id="significance" rows="2" placeholder="简要概括这一历史阶段的重要意义" required></textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">
                                    <i class="fas fa-times me-2"></i>取消
                                </button>
                                <button type="button" class="btn btn-danger" onclick="saveNewContent()">
                                    <i class="fas fa-save me-2"></i>保存内容
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 移除已存在的模态框
            const existingModal = document.getElementById('addContentModal');
            if (existingModal) {
                existingModal.remove();
            }

            // 添加新模态框到页面
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('addContentModal'));
            modal.show();
        }

        // 保存新内容
        function saveNewContent() {
            const form = document.getElementById('addContentForm');
            const formData = new FormData(form);

            // 验证必填字段
            const requiredFields = ['contentId', 'contentTitle', 'contentSubtitle', 'contentBody', 'significance'];
            for (let field of requiredFields) {
                if (!document.getElementById(field).value.trim()) {
                    alert(`请填写${document.querySelector(`label[for="${field}"]`).textContent}`);
                    return;
                }
            }

            // 构建内容对象
            const newContent = {
                title: document.getElementById('contentTitle').value.trim(),
                subtitle: document.getElementById('contentSubtitle').value.trim(),
                content: document.getElementById('contentBody').value.trim(),
                keyPoints: document.getElementById('keyPoints').value.trim().split('\n').filter(p => p.trim()),
                locations: document.getElementById('locations').value.trim().split('\n').filter(l => l.trim()),
                significance: document.getElementById('significance').value.trim()
            };

            // 保存到本地存储
            const category = document.getElementById('contentCategory').value;
            const contentId = document.getElementById('contentId').value.trim();

            let customContent = JSON.parse(localStorage.getItem('customPartyContent') || '{}');
            if (!customContent[category]) {
                customContent[category] = {};
            }
            customContent[category][contentId] = newContent;

            localStorage.setItem('customPartyContent', JSON.stringify(customContent));

            alert('内容保存成功！\n\n新内容已添加到系统中，刷新页面后即可查看。');

            // 关闭模态框
            const modal = bootstrap.Modal.getInstance(document.getElementById('addContentModal'));
            modal.hide();

            // 刷新页面以显示新内容
            setTimeout(() => {
                location.reload();
            }, 1000);
        }

        // 加载自定义内容
        function loadCustomContent() {
            const customContent = JSON.parse(localStorage.getItem('customPartyContent') || '{}');

            // 将自定义内容合并到现有内容映射中
            for (let category in customContent) {
                for (let contentId in customContent[category]) {
                    if (category === 'party-founding') {
                        contentMap[contentId] = customContent[category][contentId];
                    } else if (category === 'reform-opening') {
                        reformOpeningContent[contentId] = customContent[category][contentId];
                    } else if (category === 'new-era') {
                        newEraContent[contentId] = customContent[category][contentId];
                    }
                }
            }
        }

        // 分页功能
        let currentPages = {
            party: 1,
            reform: 1,
            newEra: 1
        };

        const itemsPerPage = 9; // 每页显示9个话题

        // 建党历程分页数据
        const partyTopics = [
            // 第一页
            [
                { id: 'party-founding', title: '中国共产党的诞生(1921)', desc: '中共一大召开，马克思主义与中国工人运动相结合', status: 'success', icons: ['map-marker-alt', 'users'], labels: ['上海、嘉兴', '13名代表'] },
                { id: 'first-cooperation', title: '第一次国共合作(1924-1927)', desc: '统一战线的伟大实践，国民革命的兴起', status: 'muted', icons: ['handshake', 'users'], labels: ['统一战线', '国民革命'] },
                { id: 'early-struggle', title: '土地革命战争(1927-1937)', desc: '南昌起义、秋收起义，井冈山革命根据地建立', status: 'warning', icons: ['mountain', 'flag'], labels: ['井冈山', '武装斗争'] },
                { id: 'anti-japanese', title: '抗日战争(1937-1945)', desc: '全民族抗战的中流砥柱，敌后战场的开辟', status: 'muted', icons: ['shield-alt', 'handshake'], labels: ['敌后根据地', '统一战线'] },
                { id: 'liberation-war', title: '解放战争(1945-1949)', desc: '三大战役胜利，推翻国民党反动统治', status: 'muted', icons: ['trophy', 'star'], labels: ['三大战役', '新中国成立'] },
                { id: 'new-china-founding', title: '新中国成立(1949-1956)', desc: '中华人民共和国成立，社会主义改造完成', status: 'muted', icons: ['flag', 'industry'], labels: ['开国大典', '社会主义改造'] },
                { id: 'socialist-construction', title: '社会主义建设探索(1956-1966)', desc: '艰辛探索与宝贵经验，社会主义建设的初步实践', status: 'muted', icons: ['cogs', 'chart-line'], labels: ['建设探索', '经济发展'] },
                { id: 'cultural-revolution', title: '文化大革命的教训(1966-1976)', desc: '深刻的历史教训，为改革开放提供重要借鉴', status: 'muted', icons: ['exclamation-triangle', 'book'], labels: ['历史教训', '经验总结'] },
                { id: 'reform-preparation', title: '改革开放的思想准备(1976-1978)', desc: '拨乱反正与思想解放，为改革开放奠定基础', status: 'muted', icons: ['lightbulb', 'search'], labels: ['思想解放', '真理标准'] }
            ],
            // 第二页 - 可以添加更多话题
            [
                { id: 'party-constitution', title: '党章发展历程', desc: '从一大党纲到新时代党章的发展演变', status: 'muted', icons: ['book', 'gavel'], labels: ['党章', '制度建设'] },
                { id: 'party-congresses', title: '历次党代会', desc: '党的全国代表大会的重要决策和历史意义', status: 'muted', icons: ['users', 'star'], labels: ['党代会', '重大决策'] }
            ]
        ];

        // 改革开放分页数据
        const reformTopics = [
            // 第一页
            [
                { id: 'reform-opening', title: '改革开放启航(1978)', desc: '十一届三中全会，工作重心转移到经济建设', status: 'muted', icons: ['calendar', 'lightbulb'], labels: ['1978年12月', '思想解放'] },
                { id: 'special-zones', title: '经济特区建设(1980s)', desc: '深圳、珠海、汕头、厦门特区设立', status: 'muted', icons: ['city', 'rocket'], labels: ['四大特区', '先行先试'] },
                { id: 'market-economy', title: '市场经济体制(1992)', desc: '邓小平南方谈话，确立社会主义市场经济', status: 'muted', icons: ['chart-line', 'globe'], labels: ['市场经济', '南方谈话'] },
                { id: 'wto-entry', title: '加入WTO(2001)', desc: '中国正式加入世界贸易组织，全面融入世界经济', status: 'muted', icons: ['handshake', 'world'], labels: ['WTO', '全球化'] },
                { id: 'reform-achievements', title: '改革开放成就', desc: '经济总量跃居世界第二，人民生活显著改善', status: 'muted', icons: ['trophy', 'heart'], labels: ['世界第二', '民生改善'] },
                { id: 'deng-theory', title: '邓小平理论形成(1978-1997)', desc: '中国特色社会主义理论体系的开篇之作', status: 'muted', icons: ['brain', 'road'], labels: ['理论创新', '中国道路'] },
                { id: 'three-represents', title: '"三个代表"重要思想(1997-2002)', desc: '新世纪党的建设和发展的重要指导思想', status: 'muted', icons: ['users', 'forward'], labels: ['三个代表', '与时俱进'] },
                { id: 'scientific-development', title: '科学发展观(2002-2012)', desc: '统筹兼顾，全面协调可持续发展', status: 'muted', icons: ['balance-scale', 'leaf'], labels: ['科学发展', '可持续'] },
                { id: 'opening-up-expansion', title: '对外开放全面扩大(1980-2010)', desc: '从沿海到内地，从贸易到投资的全方位开放', status: 'muted', icons: ['globe', 'exchange-alt'], labels: ['全面开放', '国际合作'] }
            ],
            // 第二页
            [
                { id: 'financial-reform', title: '金融体制改革', desc: '建立现代金融体系，服务实体经济发展', status: 'muted', icons: ['university', 'coins'], labels: ['金融改革', '现代体系'] },
                { id: 'state-enterprise-reform', title: '国有企业改革', desc: '建立现代企业制度，增强国有经济活力', status: 'muted', icons: ['industry', 'chart-line'], labels: ['国企改革', '现代制度'] }
            ]
        ];

        // 新时代分页数据
        const newEraTopics = [
            // 第一页
            [
                { id: 'new-era', title: '新时代开启(2012-至今)', desc: '习近平新时代中国特色社会主义思想指导', status: 'muted', icons: ['star', 'compass'], labels: ['新思想', '新征程'] },
                { id: 'great-rejuvenation', title: '中华民族伟大复兴', desc: '中国梦的提出与实践，"两个一百年"奋斗目标', status: 'muted', icons: ['flag', 'target'], labels: ['中国梦', '百年目标'] },
                { id: 'party-building', title: '全面从严治党', desc: '党的建设新的伟大工程，反腐败斗争压倒性胜利', status: 'muted', icons: ['shield-alt', 'gavel'], labels: ['从严治党', '反腐倡廉'] },
                { id: 'poverty-alleviation', title: '脱贫攻坚战', desc: '全面建成小康社会，消除绝对贫困', status: 'muted', icons: ['heart', 'home'], labels: ['脱贫攻坚', '小康社会'] },
                { id: 'modernization', title: '社会主义现代化强国', desc: '全面建设社会主义现代化国家新征程', status: 'muted', icons: ['rocket', 'globe'], labels: ['现代化', '强国建设'] },
                { id: 'belt-road-initiative', title: '"一带一路"倡议(2013-至今)', desc: '构建人类命运共同体的重要实践', status: 'muted', icons: ['road', 'handshake'], labels: ['一带一路', '命运共同体'] },
                { id: 'covid-response', title: '抗击新冠疫情(2020-2022)', desc: '人民至上、生命至上的伟大抗疫精神', status: 'muted', icons: ['shield-virus', 'heart'], labels: ['抗疫精神', '人民至上'] },
                { id: 'ecological-civilization', title: '生态文明建设', desc: '绿水青山就是金山银山，美丽中国建设', status: 'muted', icons: ['leaf', 'mountain'], labels: ['生态文明', '美丽中国'] },
                { id: 'common-prosperity', title: '共同富裕示范区建设', desc: '扎实推动共同富裕，实现全体人民共同富裕', status: 'muted', icons: ['balance-scale', 'users'], labels: ['共同富裕', '全体人民'] }
            ],
            // 第二页
            [
                { id: 'digital-china', title: '数字中国建设', desc: '数字化转型，建设网络强国、数字中国', status: 'muted', icons: ['laptop', 'wifi'], labels: ['数字化', '网络强国'] },
                { id: 'rural-revitalization', title: '乡村振兴战略', desc: '全面推进乡村振兴，加快农业农村现代化', status: 'muted', icons: ['seedling', 'tractor'], labels: ['乡村振兴', '农村现代化'] }
            ]
        ];

        // 渲染话题列表
        function renderTopics(topics, containerId) {
            const container = document.querySelector(`#${containerId} .list-group`);
            if (!container) return;

            container.innerHTML = topics.map(topic => `
                <a href="#" class="list-group-item list-group-item-action" onclick="openLearningContent('${topic.id}')">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">${topic.title}</h6>
                        <small class="text-${topic.status}">${topic.status === 'success' ? '已完成' : topic.status === 'warning' ? '进行中' : '未开始'}</small>
                    </div>
                    <p class="mb-1">${topic.desc}</p>
                    <small class="text-muted">
                        <i class="fas fa-${topic.icons[0]} me-1"></i>${topic.labels[0]}
                        <i class="fas fa-${topic.icons[1]} ms-2 me-1"></i>${topic.labels[1]}
                    </small>
                </a>
            `).join('');
        }

        // 更新分页按钮状态
        function updatePaginationButtons(category, currentPage, totalPages) {
            const prevBtn = document.getElementById(`${category}PrevBtn`);
            const nextBtn = document.getElementById(`${category}NextBtn`);
            const currentPageSpan = document.getElementById(`${category}CurrentPage`);
            const totalPagesSpan = document.getElementById(`${category}TotalPages`);

            if (prevBtn) prevBtn.disabled = currentPage === 1;
            if (nextBtn) nextBtn.disabled = currentPage === totalPages;
            if (currentPageSpan) currentPageSpan.textContent = currentPage;
            if (totalPagesSpan) totalPagesSpan.textContent = totalPages;
        }

        // 建党历程分页
        function changePartyPage(direction) {
            const totalPages = partyTopics.length;
            currentPages.party += direction;

            if (currentPages.party < 1) currentPages.party = 1;
            if (currentPages.party > totalPages) currentPages.party = totalPages;

            const topics = partyTopics[currentPages.party - 1];
            renderTopics(topics, 'party-founding-card');
            updatePaginationButtons('party', currentPages.party, totalPages);
        }

        // 改革开放分页
        function changeReformPage(direction) {
            const totalPages = reformTopics.length;
            currentPages.reform += direction;

            if (currentPages.reform < 1) currentPages.reform = 1;
            if (currentPages.reform > totalPages) currentPages.reform = totalPages;

            const topics = reformTopics[currentPages.reform - 1];
            renderTopics(topics, 'reform-opening-card');
            updatePaginationButtons('reform', currentPages.reform, totalPages);
        }

        // 新时代分页
        function changeNewEraPage(direction) {
            const totalPages = newEraTopics.length;
            currentPages.newEra += direction;

            if (currentPages.newEra < 1) currentPages.newEra = 1;
            if (currentPages.newEra > totalPages) currentPages.newEra = totalPages;

            const topics = newEraTopics[currentPages.newEra - 1];
            renderTopics(topics, 'new-era-card');
            updatePaginationButtons('newEra', currentPages.newEra, totalPages);
        }

        // 初始化分页
        function initializePagination() {
            // 为卡片添加ID以便识别
            const partyCard = document.querySelector('.card-header .fa-star').closest('.card');
            if (partyCard) partyCard.id = 'party-founding-card';

            const reformCard = document.querySelector('.card-header .fa-rocket').closest('.card');
            if (reformCard) reformCard.id = 'reform-opening-card';

            const newEraCard = document.querySelector('.card-header .fa-flag').closest('.card');
            if (newEraCard) newEraCard.id = 'new-era-card';

            // 初始化第一页内容
            updatePaginationButtons('party', 1, partyTopics.length);
            updatePaginationButtons('reform', 1, reformTopics.length);
            updatePaginationButtons('newEra', 1, newEraTopics.length);
        }

        // 检查管理员权限并显示编辑按钮
        function checkAdminPermissions() {
            const adminSession = JSON.parse(localStorage.getItem('adminSession') || 'null');
            const adminButtons = document.querySelectorAll('.admin-only');

            if (adminSession && adminSession.isAdmin) {
                adminButtons.forEach(button => {
                    button.style.display = 'inline-block';
                });
            } else {
                adminButtons.forEach(button => {
                    button.style.display = 'none';
                });
            }
        }

        // 页面加载时加载自定义内容
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomContent();
            initializePagination();
            checkAdminPermissions();
        });

        function planRedRoute() {
            alert('🗺️ 红色教育路线规划\n\n系统将为您推荐最佳的参观路线：\n\n📍 一日游路线：\n上午：黄埔军校旧址 → 中山纪念堂\n下午：广州起义纪念馆 → 广州博物馆\n\n📍 两日游路线：\n第一天：广州市内红色景点\n第二天：周边革命根据地\n\n🚌 交通方式：地铁+公交+步行\n💰 预计费用：50-100元/人\n⏰ 建议时长：6-8小时');
        }

        function openVirtualTour() {
            alert('🥽 虚拟参观功能\n\n通过VR技术，您可以：\n\n• 360度全景浏览红色教育基地\n• 沉浸式体验历史场景重现\n• 聆听专业讲解员的详细介绍\n• 参与互动式历史知识问答\n\n🎮 支持设备：VR头盔、手机VR、电脑浏览器\n📱 扫描二维码即可开始虚拟参观体验');
        }

        // 理论研讨功能
        function joinDiscussion(topicId) {
            const topicMap = {
                'party-building-requirements': {
                    title: '新时代党的建设总要求研讨',
                    subtitle: '深入探讨新时代党的建设总要求的深刻内涵',
                    content: `
                        <h4>研讨主题</h4>
                        <p>新时代党的建设总要求是：坚持和加强党的全面领导，坚持党要管党、全面从严治党，以加强党的长期执政能力建设、先进性和纯洁性建设为主线，以党的政治建设为统领，以坚定理想信念宗旨为根基，以调动全党积极性、主动性、创造性为着力点，全面推进党的政治建设、思想建设、组织建设、作风建设、纪律建设，把制度建设贯穿其中，深入推进反腐败斗争，不断提高党的建设质量。</p>

                        <h4>讨论要点</h4>
                        <p><strong>1. 如何理解"坚持和加强党的全面领导"？</strong><br>
                        党的全面领导是党和国家的根本所在、命脉所在，是全国各族人民的利益所系、命运所系。</p>

                        <p><strong>2. 为什么要以党的政治建设为统领？</strong><br>
                        党的政治建设是党的根本性建设，决定党的建设方向和效果。</p>

                        <p><strong>3. 如何在实践中贯彻新时代党的建设总要求？</strong><br>
                        要统筹推进党的各项建设，形成党的建设整体效应。</p>

                        <h4>参与讨论</h4>
                        <p>欢迎大家结合自身学习和实践，分享对新时代党的建设总要求的理解和认识。</p>
                    `,
                    participants: 23,
                    status: '进行中'
                },
                'core-values': {
                    title: '大学生如何践行社会主义核心价值观',
                    subtitle: '结合大学生实际，探讨践行路径',
                    content: `
                        <h4>核心价值观内容</h4>
                        <p><strong>国家层面：</strong>富强、民主、文明、和谐<br>
                        <strong>社会层面：</strong>自由、平等、公正、法治<br>
                        <strong>个人层面：</strong>爱国、敬业、诚信、友善</p>

                        <h4>大学生践行路径</h4>
                        <p><strong>1. 在学习中践行</strong><br>
                        勤奋学习，追求真理，培养科学精神和创新能力。</p>

                        <p><strong>2. 在生活中践行</strong><br>
                        诚实守信，友善待人，积极参与社会实践。</p>

                        <p><strong>3. 在工作中践行</strong><br>
                        爱岗敬业，服务社会，为实现中华民族伟大复兴贡献力量。</p>

                        <h4>讨论话题</h4>
                        <p>• 如何在日常学习生活中体现社会主义核心价值观？<br>
                        • 大学生践行核心价值观面临哪些挑战？<br>
                        • 如何发挥专业优势践行核心价值观？</p>
                    `,
                    participants: 45,
                    status: '热门'
                },
                'tech-party-building': {
                    title: '科技创新与党建工作深度融合',
                    subtitle: '探讨数字化时代党建工作创新',
                    content: `
                        <h4>融合背景</h4>
                        <p>在数字化、网络化、智能化深入发展的新时代，如何运用现代科技手段创新党建工作方式方法，提高党建工作的科学化水平，是新时代党建工作面临的重要课题。</p>

                        <h4>融合路径</h4>
                        <p><strong>1. 数字化党建平台</strong><br>
                        建设集党员管理、学习教育、组织生活于一体的数字化平台。</p>

                        <p><strong>2. 智能化学习系统</strong><br>
                        运用AI技术个性化推送学习内容，提高学习效果。</p>

                        <p><strong>3. 网络化组织生活</strong><br>
                        利用视频会议、在线投票等技术创新组织生活形式。</p>

                        <h4>实践案例</h4>
                        <p>• 智慧党建云平台建设<br>
                        • VR党史教育体验<br>
                        • 区块链党员积分管理<br>
                        • 大数据党建工作分析</p>
                    `,
                    participants: 12,
                    status: '新话题'
                }
            };

            const topic = topicMap[topicId];
            if (topic) {
                showDiscussionModal(topic);
            } else {
                alert('该讨论话题正在准备中，敬请期待！');
            }
        }

        // 显示讨论详情模态框
        function showDiscussionModal(topic) {
            const modalHtml = `
                <div class="modal fade" id="discussionModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header bg-warning text-white">
                                <div>
                                    <h4 class="modal-title mb-1">${topic.title}</h4>
                                    <p class="mb-0 opacity-75">${topic.subtitle}</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="discussion-content">
                                    ${topic.content}
                                </div>

                                <div class="discussion-stats mt-4 p-3 bg-light rounded">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <h5 class="text-warning mb-1">${topic.participants}</h5>
                                            <small class="text-muted">参与人数</small>
                                        </div>
                                        <div class="col-4">
                                            <h5 class="text-info mb-1">${Math.floor(Math.random() * 50) + 20}</h5>
                                            <small class="text-muted">讨论回复</small>
                                        </div>
                                        <div class="col-4">
                                            <h5 class="text-success mb-1">${topic.status}</h5>
                                            <small class="text-muted">当前状态</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="discussion-input mt-4">
                                    <h6><i class="fas fa-comment me-2"></i>发表观点</h6>
                                    <textarea class="form-control mb-3" rows="3" placeholder="请输入您的观点和看法..."></textarea>
                                    <div class="d-flex justify-content-between">
                                        <small class="text-muted">请文明讨论，理性发言</small>
                                        <button class="btn btn-warning" onclick="submitDiscussion()">
                                            <i class="fas fa-paper-plane me-2"></i>发表观点
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">关闭</button>
                                <button type="button" class="btn btn-warning" onclick="followTopic()">
                                    <i class="fas fa-star me-2"></i>关注话题
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // 移除已存在的模态框
            const existingModal = document.getElementById('discussionModal');
            if (existingModal) {
                existingModal.remove();
            }

            // 添加新模态框到页面
            document.body.insertAdjacentHTML('beforeend', modalHtml);

            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('discussionModal'));
            modal.show();
        }

        // 提交讨论
        function submitDiscussion() {
            alert('您的观点已提交！\n\n感谢您的参与，您的观点将在审核后显示在讨论区。');
            const modal = bootstrap.Modal.getInstance(document.getElementById('discussionModal'));
            modal.hide();
        }

        // 关注话题
        function followTopic() {
            alert('已关注该话题！\n\n您将收到该话题的最新讨论动态。');
        }

        function openDocument(docId) {
            const docMap = {
                'marxism-basics': {
                    title: '马克思主义基本原理概论',
                    content: '马克思主义基本原理是关于整个世界的普遍本质和发展的一般规律的科学，是无产阶级和人类解放的科学。本文献系统阐述了马克思主义哲学、政治经济学和科学社会主义的基本原理。',
                    chapters: ['马克思主义的产生和发展', '世界的物质性及发展规律', '认识的本质及发展规律', '人类社会发展规律', '资本主义的本质及规律', '社会主义的发展及规律']
                },
                'mao-thought': {
                    title: '毛泽东思想概论',
                    content: '毛泽东思想是马克思列宁主义在中国的运用和发展，是被实践证明了的关于中国革命和建设的正确的理论原则和经验总结，是中国共产党集体智慧的结晶。',
                    chapters: ['毛泽东思想的形成和发展', '新民主主义革命理论', '社会主义改造理论', '社会主义建设道路初步探索', '毛泽东思想的历史地位']
                },
                'deng-theory': {
                    title: '邓小平理论学习资料',
                    content: '邓小平理论是马克思主义在中国发展的新阶段，是当代中国的马克思主义。它围绕"什么是社会主义、怎样建设社会主义"这个根本问题，系统回答了中国社会主义的发展道路、发展阶段、根本任务等一系列基本问题。',
                    chapters: ['邓小平理论的形成', '社会主义本质理论', '社会主义初级阶段理论', '改革开放理论', '社会主义市场经济理论']
                },
                'xi-thought': {
                    title: '习近平新时代中国特色社会主义思想学习纲要',
                    content: '习近平新时代中国特色社会主义思想是马克思主义中国化最新成果，是党和人民实践经验和集体智慧的结晶，是中国特色社会主义理论体系的重要组成部分，是全党全国人民为实现中华民族伟大复兴而奋斗的行动指南。',
                    chapters: ['新时代坚持和发展中国特色社会主义', '以人民为中心', '全面深化改革', '新发展理念', '全面从严治党', '构建人类命运共同体']
                }
            };

            const doc = docMap[docId];
            if (doc) {
                showDocumentModal(doc);
            } else {
                alert('该文献正在整理中，敬请期待！');
            }
        }

        // 显示文献模态框
        function showDocumentModal(doc) {
            const modalHtml = `
                <div class="modal fade" id="documentModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                                <h4 class="modal-title">${doc.title}</h4>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="document-content">
                                    <h5>文献简介</h5>
                                    <p>${doc.content}</p>

                                    <h5>主要章节</h5>
                                    <ul class="list-group list-group-flush">
                                        ${doc.chapters.map((chapter, index) => `
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                第${index + 1}章：${chapter}
                                                <button class="btn btn-sm btn-outline-primary" onclick="readChapter('${index}')">阅读</button>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">关闭</button>
                                <button type="button" class="btn btn-primary" onclick="downloadDocument()">
                                    <i class="fas fa-download me-2"></i>下载文献
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const existingModal = document.getElementById('documentModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const modal = new bootstrap.Modal(document.getElementById('documentModal'));
            modal.show();
        }

        function readChapter(chapterIndex) {
            alert(`正在阅读第${parseInt(chapterIndex) + 1}章内容...\n\n请认真学习，做好学习笔记。`);
        }

        function downloadDocument() {
            alert('文献下载功能\n\n文献将以PDF格式下载到您的设备中。');
        }

        function playVideo(videoId) {
            const videoMap = {
                'party-history': {
                    title: '中国共产党历史专题片',
                    duration: '120分钟',
                    description: '全面回顾中国共产党从成立到新时代的光辉历程，展现党的伟大成就和宝贵经验。',
                    episodes: ['开天辟地(1921-1949)', '改天换地(1949-1978)', '翻天覆地(1978-2012)', '惊天动地(2012-至今)']
                },
                'reform-opening': {
                    title: '改革开放四十年纪录片',
                    duration: '90分钟',
                    description: '记录改革开放40年来中国经济社会发展的伟大成就，展现中国人民的奋斗历程。',
                    episodes: ['春天的故事', '特区建设', '市场经济', '全面开放', '新时代改革']
                },
                'socialist-development': {
                    title: '社会主义发展史教学视频',
                    duration: '60分钟',
                    description: '系统介绍社会主义从空想到科学、从理论到实践、从一国到多国的发展历程。',
                    episodes: ['空想社会主义', '科学社会主义', '十月革命', '社会主义建设', '中国特色社会主义']
                },
                'new-china': {
                    title: '新中国成立七十年成就展示',
                    duration: '150分钟',
                    description: '全景展示新中国成立70年来在政治、经济、文化、社会、生态文明建设等方面取得的辉煌成就。',
                    episodes: ['开国大典', '建设成就', '改革开放', '科技发展', '民生改善', '大国外交']
                }
            };

            const video = videoMap[videoId];
            if (video) {
                showVideoModal(video);
            } else {
                alert('该视频正在制作中，敬请期待！');
            }
        }

        // 显示视频模态框
        function showVideoModal(video) {
            const modalHtml = `
                <div class="modal fade" id="videoModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-info text-white">
                                <h4 class="modal-title">${video.title}</h4>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="video-player mb-3">
                                    <div class="ratio ratio-16x9 bg-dark d-flex align-items-center justify-content-center">
                                        <div class="text-white text-center">
                                            <i class="fas fa-play-circle fa-4x mb-3"></i>
                                            <p>点击播放按钮开始观看</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="video-info">
                                    <p><strong>时长：</strong>${video.duration}</p>
                                    <p><strong>简介：</strong>${video.description}</p>

                                    <h6>分集列表</h6>
                                    <div class="list-group">
                                        ${video.episodes.map((episode, index) => `
                                            <a href="#" class="list-group-item list-group-item-action" onclick="playEpisode(${index})">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <span>第${index + 1}集：${episode}</span>
                                                    <i class="fas fa-play text-info"></i>
                                                </div>
                                            </a>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">关闭</button>
                                <button type="button" class="btn btn-info" onclick="addToWatchlist()">
                                    <i class="fas fa-bookmark me-2"></i>加入观看列表
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const existingModal = document.getElementById('videoModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const modal = new bootstrap.Modal(document.getElementById('videoModal'));
            modal.show();
        }

        function playEpisode(episodeIndex) {
            alert(`正在播放第${episodeIndex + 1}集...\n\n请认真观看，思考其中的深刻内涵。`);
        }

        function addToWatchlist() {
            alert('已加入观看列表！\n\n您可以在个人中心查看您的观看列表。');
        }

        function readNews(newsId) {
            const newsMap = {
                'two-sessions': {
                    title: '全国两会精神解读',
                    date: '2024年3月15日',
                    source: '人民日报',
                    content: `
                        <h5>两会重要成果</h5>
                        <p>2024年全国两会胜利闭幕，会议审议通过了政府工作报告、全国人大常委会工作报告、全国政协常委会工作报告等重要文件，对今年经济社会发展作出全面部署。</p>

                        <h5>主要精神要点</h5>
                        <ul>
                            <li>坚持稳中求进工作总基调</li>
                            <li>推动经济高质量发展</li>
                            <li>深化改革开放</li>
                            <li>保障和改善民生</li>
                            <li>加强生态文明建设</li>
                        </ul>

                        <h5>学习要求</h5>
                        <p>要深入学习贯彻两会精神，把思想和行动统一到党中央决策部署上来，为实现全年目标任务贡献力量。</p>
                    `,
                    tags: ['两会', '政府工作报告', '经济发展']
                },
                'economic-development': {
                    title: '经济高质量发展专题',
                    date: '2024年2月20日',
                    source: '经济日报',
                    content: `
                        <h5>高质量发展内涵</h5>
                        <p>高质量发展是体现新发展理念的发展，是创新成为第一动力、协调成为内生特点、绿色成为普遍形态、开放成为必由之路、共享成为根本目的的发展。</p>

                        <h5>主要特征</h5>
                        <ul>
                            <li>创新驱动：科技创新和制度创新双轮驱动</li>
                            <li>协调发展：区域协调、城乡协调、产业协调</li>
                            <li>绿色发展：生态环境保护与经济发展并重</li>
                            <li>开放发展：更高水平对外开放</li>
                            <li>共享发展：发展成果更多更公平惠及全体人民</li>
                        </ul>

                        <h5>实现路径</h5>
                        <p>要坚持新发展理念，构建新发展格局，推动供给侧结构性改革，加快建设现代化经济体系。</p>
                    `,
                    tags: ['高质量发展', '新发展理念', '现代化经济体系']
                },
                'rural-revitalization': {
                    title: '乡村振兴战略实施',
                    date: '2024年1月10日',
                    source: '农民日报',
                    content: `
                        <h5>战略意义</h5>
                        <p>实施乡村振兴战略，是党的十九大作出的重大决策部署，是决胜全面建成小康社会、全面建设社会主义现代化国家的重大历史任务，是新时代"三农"工作的总抓手。</p>

                        <h5>总体要求</h5>
                        <ul>
                            <li>产业兴旺：发展现代农业，促进一二三产业融合</li>
                            <li>生态宜居：建设美丽乡村，改善农村人居环境</li>
                            <li>乡风文明：传承发展农村优秀传统文化</li>
                            <li>治理有效：建立健全现代乡村治理体系</li>
                            <li>生活富裕：增加农民收入，提高生活质量</li>
                        </ul>

                        <h5>重点任务</h5>
                        <p>要统筹推进农村经济建设、政治建设、文化建设、社会建设、生态文明建设和党的建设，加快推进乡村治理体系和治理能力现代化。</p>
                    `,
                    tags: ['乡村振兴', '三农工作', '现代农业']
                },
                'carbon-neutrality': {
                    title: '碳达峰碳中和行动方案',
                    date: '2024年1月5日',
                    source: '光明日报',
                    content: `
                        <h5>目标任务</h5>
                        <p>力争2030年前实现碳达峰，2060年前实现碳中和，是党中央经过深思熟虑作出的重大战略决策，事关中华民族永续发展和构建人类命运共同体。</p>

                        <h5>主要举措</h5>
                        <ul>
                            <li>构建清洁低碳安全高效的能源体系</li>
                            <li>实施重点行业领域减污降碳行动</li>
                            <li>推动绿色低碳技术实现重大突破</li>
                            <li>完善绿色低碳政策和市场体系</li>
                            <li>倡导绿色低碳生活方式</li>
                        </ul>

                        <h5>实施路径</h5>
                        <p>要统筹产业结构调整、污染治理、生态保护、应对气候变化，协同推进降碳、减污、扩绿、增长。</p>
                    `,
                    tags: ['碳达峰', '碳中和', '绿色发展']
                }
            };

            const news = newsMap[newsId];
            if (news) {
                showNewsModal(news);
            } else {
                alert('该新闻正在编辑中，敬请期待！');
            }
        }

        // 显示新闻模态框
        function showNewsModal(news) {
            const modalHtml = `
                <div class="modal fade" id="newsModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header bg-success text-white">
                                <div>
                                    <h4 class="modal-title">${news.title}</h4>
                                    <p class="mb-0 opacity-75">${news.date} | ${news.source}</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="news-content">
                                    ${news.content}
                                </div>

                                <div class="news-tags mt-4">
                                    <h6>相关标签</h6>
                                    <div class="d-flex flex-wrap gap-2">
                                        ${news.tags.map(tag => `<span class="badge bg-success">${tag}</span>`).join('')}
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">关闭</button>
                                <button type="button" class="btn btn-success" onclick="shareNews()">
                                    <i class="fas fa-share me-2"></i>分享新闻
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const existingModal = document.getElementById('newsModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const modal = new bootstrap.Modal(document.getElementById('newsModal'));
            modal.show();
        }

        function shareNews() {
            alert('新闻分享功能\n\n新闻链接已复制到剪贴板，您可以分享给其他同学！');
        }

        // 管理员编辑功能
        function editContent(type, id) {
            // 检查管理员权限
            const adminSession = JSON.parse(localStorage.getItem('adminSession') || 'null');
            if (!adminSession || !adminSession.isAdmin) {
                alert('此功能需要管理员权限，请先登录管理后台。');
                return;
            }

            if (type === 'volunteer') {
                editVolunteerService(id);
            } else if (type === 'activity') {
                editActivity(id);
            }
        }

        // 编辑志愿服务
        function editVolunteerService(serviceId) {
            const modalHtml = `
                <div class="modal fade" id="editServiceModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                                <h4 class="modal-title">编辑志愿服务</h4>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="editServiceForm">
                                    <input type="hidden" id="serviceId" value="${serviceId}">

                                    <div class="mb-3">
                                        <label for="serviceName" class="form-label">服务名称 *</label>
                                        <input type="text" class="form-control" id="serviceName" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="serviceCategory" class="form-label">服务类别 *</label>
                                        <select class="form-control" id="serviceCategory" required>
                                            <option value="mental-health">心理健康服务</option>
                                            <option value="academic-support">学业支持服务</option>
                                            <option value="community-service">社区服务</option>
                                            <option value="tech-support">科技支持服务</option>
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="serviceDescription" class="form-label">服务描述 *</label>
                                        <textarea class="form-control" id="serviceDescription" rows="4" required></textarea>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="serviceDate" class="form-label">服务时间</label>
                                                <input type="datetime-local" class="form-control" id="serviceDate">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="serviceLocation" class="form-label">服务地点</label>
                                                <input type="text" class="form-control" id="serviceLocation">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="maxParticipants" class="form-label">最大参与人数</label>
                                                <input type="number" class="form-control" id="maxParticipants" min="1" max="100">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="serviceStatus" class="form-label">服务状态</label>
                                                <select class="form-control" id="serviceStatus">
                                                    <option value="active">开放报名</option>
                                                    <option value="full">名额已满</option>
                                                    <option value="completed">已完成</option>
                                                    <option value="cancelled">已取消</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">取消</button>
                                <button type="button" class="btn btn-primary" onclick="saveServiceEdit()">保存修改</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const existingModal = document.getElementById('editServiceModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const modal = new bootstrap.Modal(document.getElementById('editServiceModal'));
            modal.show();
        }

        // 保存志愿服务编辑
        function saveServiceEdit() {
            const serviceData = {
                id: document.getElementById('serviceId').value,
                name: document.getElementById('serviceName').value,
                category: document.getElementById('serviceCategory').value,
                description: document.getElementById('serviceDescription').value,
                date: document.getElementById('serviceDate').value,
                location: document.getElementById('serviceLocation').value,
                maxParticipants: document.getElementById('maxParticipants').value,
                status: document.getElementById('serviceStatus').value,
                lastModified: new Date().toISOString()
            };

            // 保存到本地存储
            let services = JSON.parse(localStorage.getItem('volunteerServices') || '[]');
            const index = services.findIndex(s => s.id === serviceData.id);
            if (index >= 0) {
                services[index] = { ...services[index], ...serviceData };
            } else {
                services.push(serviceData);
            }
            localStorage.setItem('volunteerServices', JSON.stringify(services));

            alert('志愿服务信息已更新！');
            const modal = bootstrap.Modal.getInstance(document.getElementById('editServiceModal'));
            modal.hide();
        }

        // 志愿服务功能
        function applyVolunteer(serviceId) {
            const serviceMap = {
                'mental-health-lecture': '心理健康知识宣讲',
                'assessment-assist': '心理测评协助',
                'counseling-support': '心理咨询陪伴',
                'study-guidance': '学习方法指导',
                'course-tutoring': '专业课程辅导',
                'postgrad-sharing': '考研经验分享',
                'tech-training': '智能设备使用培训',
                'env-protection': '环境保护宣传',
                'child-care': '关爱留守儿童',
                'tech-demo': '科技创新展示',
                'digital-service': '数字化服务',
                'emergency-training': '应急救援培训'
            };

            const serviceName = serviceMap[serviceId];
            if (serviceName) {
                const confirmed = confirm(`您确定要报名参与"${serviceName}"志愿服务吗？\n\n报名成功后，我们会联系您确认具体的服务时间和地点。`);
                if (confirmed) {
                    // 保存志愿服务申请
                    const applications = JSON.parse(localStorage.getItem('volunteerApplications') || '[]');
                    const newApplication = {
                        id: Date.now(),
                        serviceId: serviceId,
                        serviceName: serviceName,
                        applicantName: getCurrentUser()?.username || '匿名用户',
                        applyTime: new Date().toISOString(),
                        status: 'pending'
                    };
                    applications.push(newApplication);
                    localStorage.setItem('volunteerApplications', JSON.stringify(applications));

                    alert('报名成功！\n\n您的志愿服务申请已提交，我们会尽快联系您确认相关事宜。');
                }
            }
        }

        // 编辑活动
        function editActivity(activityId) {
            const modalHtml = `
                <div class="modal fade" id="editActivityModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-warning text-white">
                                <h4 class="modal-title">编辑活动</h4>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form id="editActivityForm">
                                    <input type="hidden" id="activityId" value="${activityId}">

                                    <div class="mb-3">
                                        <label for="activityName" class="form-label">活动名称 *</label>
                                        <input type="text" class="form-control" id="activityName" required>
                                    </div>

                                    <div class="mb-3">
                                        <label for="activityType" class="form-label">活动类型 *</label>
                                        <select class="form-control" id="activityType" required>
                                            <option value="party-education">党史教育</option>
                                            <option value="mental-health">心理健康</option>
                                            <option value="academic">学术交流</option>
                                            <option value="volunteer">志愿服务</option>
                                            <option value="cultural">文化活动</option>
                                            <option value="sports">体育活动</option>
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label for="activityDescription" class="form-label">活动描述 *</label>
                                        <textarea class="form-control" id="activityDescription" rows="4" required></textarea>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="activityDate" class="form-label">活动时间 *</label>
                                                <input type="datetime-local" class="form-control" id="activityDate" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="activityLocation" class="form-label">活动地点 *</label>
                                                <input type="text" class="form-control" id="activityLocation" required>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="maxParticipants" class="form-label">最大参与人数</label>
                                                <input type="number" class="form-control" id="maxParticipants" min="1" max="500">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="activityStatus" class="form-label">活动状态</label>
                                                <select class="form-control" id="activityStatus">
                                                    <option value="planned">计划中</option>
                                                    <option value="registration">报名中</option>
                                                    <option value="ongoing">进行中</option>
                                                    <option value="completed">已完成</option>
                                                    <option value="cancelled">已取消</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="organizer" class="form-label">主办方</label>
                                        <input type="text" class="form-control" id="organizer" placeholder="例如：物联网党支部">
                                    </div>

                                    <div class="mb-3">
                                        <label for="contactInfo" class="form-label">联系方式</label>
                                        <input type="text" class="form-control" id="contactInfo" placeholder="联系人及电话">
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">取消</button>
                                <button type="button" class="btn btn-warning" onclick="saveActivityEdit()">保存修改</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const existingModal = document.getElementById('editActivityModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const modal = new bootstrap.Modal(document.getElementById('editActivityModal'));
            modal.show();
        }

        // 保存活动编辑
        function saveActivityEdit() {
            const activityData = {
                id: document.getElementById('activityId').value,
                name: document.getElementById('activityName').value,
                type: document.getElementById('activityType').value,
                description: document.getElementById('activityDescription').value,
                date: document.getElementById('activityDate').value,
                location: document.getElementById('activityLocation').value,
                maxParticipants: document.getElementById('maxParticipants').value,
                status: document.getElementById('activityStatus').value,
                organizer: document.getElementById('organizer').value,
                contactInfo: document.getElementById('contactInfo').value,
                lastModified: new Date().toISOString()
            };

            // 保存到本地存储
            let activities = JSON.parse(localStorage.getItem('partyActivities') || '[]');
            const index = activities.findIndex(a => a.id === activityData.id);
            if (index >= 0) {
                activities[index] = { ...activities[index], ...activityData };
            } else {
                activities.push(activityData);
            }
            localStorage.setItem('partyActivities', JSON.stringify(activities));

            alert('活动信息已更新！');
            const modal = bootstrap.Modal.getInstance(document.getElementById('editActivityModal'));
            modal.hide();
        }

        // 活动规划功能
        function viewActivity(activityId) {
            const activityMap = {
                'party-lecture': {
                    name: '党史学习专题讲座',
                    date: '2024年12月15日 14:00-16:00',
                    location: '学术报告厅',
                    description: '邀请党史专家讲解中国共产党的光辉历程',
                    participants: 120,
                    status: '进行中'
                },
                'mental-health-talk': {
                    name: '心理健康知识宣讲',
                    date: '2024年12月18日 19:00-21:00',
                    location: '大学生活动中心',
                    description: '面向新生开展心理健康知识普及',
                    participants: 80,
                    status: '准备中'
                }
            };

            const activity = activityMap[activityId];
            if (activity) {
                alert(`活动详情：\n\n活动名称：${activity.name}\n时间：${activity.date}\n地点：${activity.location}\n描述：${activity.description}\n参与人数：${activity.participants}人\n状态：${activity.status}`);
            }
        }

        // 创建新活动
        document.addEventListener('DOMContentLoaded', function() {
            const newActivityForm = document.getElementById('newActivityForm');
            if (newActivityForm) {
                newActivityForm.addEventListener('submit', function(e) {
                    e.preventDefault();

                    const formData = {
                        id: Date.now(),
                        name: document.getElementById('activityName').value,
                        type: document.getElementById('activityType').value,
                        date: document.getElementById('activityDate').value,
                        location: document.getElementById('activityLocation').value,
                        description: document.getElementById('activityDescription').value,
                        creator: getCurrentUser()?.username || '匿名用户',
                        createTime: new Date().toISOString(),
                        status: 'planned'
                    };

                    // 保存活动数据
                    const activities = JSON.parse(localStorage.getItem('partyActivities') || '[]');
                    activities.push(formData);
                    localStorage.setItem('partyActivities', JSON.stringify(activities));

                    alert('活动创建成功！\n\n您的活动已添加到活动日历中，请及时跟进活动准备工作。');

                    // 重置表单
                    newActivityForm.reset();
                });
            }
        });

        // 获取当前用户信息
        function getCurrentUser() {
            return JSON.parse(localStorage.getItem('currentUser') || 'null');
        }

        // 检查登录状态
        function checkLoginStatus() {
            const currentUser = getCurrentUser();
            if (!currentUser) {
                alert('请先登录后再参与活动');
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // 页面加载时检查登录状态
        document.addEventListener('DOMContentLoaded', function() {
            // 为需要登录的功能添加检查
            const loginRequiredButtons = document.querySelectorAll('[onclick*="applyVolunteer"], [onclick*="joinDiscussion"]');
            loginRequiredButtons.forEach(button => {
                const originalOnclick = button.getAttribute('onclick');
                button.setAttribute('onclick', `if(checkLoginStatus()) { ${originalOnclick} }`);
            });
        });
    </script>
</body>
</html>
